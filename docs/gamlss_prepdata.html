<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>

<meta charset="utf-8" />
<meta name="generator" content="quarto-1.5.57" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

<meta name="author" content="De Bastiani, F." />
<meta name="author" content="Heller, G." />
<meta name="author" content="Kneib, T." />
<meta name="author" content="Mayr, A." />
<meta name="author" content="Rigby, R. A." />
<meta name="author" content="Stasinopoulos, M. D." />
<meta name="author" content="Stauffer, Reto" />
<meta name="author" content="Umlauf, N," />
<meta name="author" content="Zeileis, A." />

<title>The Functions in the package gamlss.prepdata – Extra material for GAMLSS packages</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<!-- htmldependencies:E3FAD763 -->
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script  src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script  src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link  href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet" />

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css" />
</head>

<body>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="/index.html">
    <span class="navbar-title">Extra material for GAMLSS packages</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
  aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation"
  onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="/index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="/about.html"> 
<span class="menu-text">About extra materrial for GAMLSS packages</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="/gamlss_prepdata.html"> 
<span class="menu-text">The Functions in the package `gamlss.prepdata`</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <div id="quarto-toc-target"></div>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The Functions in the package <code>gamlss.prepdata</code></h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliations</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">De Bastiani, F. </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Federal University of Pernambuco, Brazil
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Heller, G. </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Syndey, Austalia
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Kneib, T. </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Georg-August-Universitat Gottigan, Gernany
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Mayr, A. </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Marburg, Gernany
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Rigby, R. A. </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Greenwich, UK
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Stasinopoulos, M. D. <a href="mailto:d.stasinopoulos@gre.ac.uk" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Greenwich, UK
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Stauffer, Reto </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Innsbruck, Austria
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Umlauf, N, </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Innsbruck, Austria
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Zeileis, A. </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            University of Innsbruck, Austria
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  


</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#sec-introduction" id="toc-sec-introduction">Introduction</a></li>
  <li><a href="#introduction-to-the-gamlss.prepdata-package" id="toc-introduction-to-the-gamlss.prepdata-package">Introduction to the <code>gamlss.prepdata</code> Package</a></li>
  <li><a href="#distributional-regression-model" id="toc-distributional-regression-model">Distributional Regression model</a></li>
  <li><a href="#sec-Information" id="toc-sec-Information">Ιnformation functions</a></li>
  <li><a href="#sec-Graphical-functions" id="toc-sec-Graphical-functions">Graphical functions</a></li>
  <li><a href="#sec-Features" id="toc-sec-Features">Features</a></li>
  <li><a href="#sec-Partition" id="toc-sec-Partition">Data Partition</a></li>
  <li><a href="#sec-Family" id="toc-sec-Family">Plotting Distribution Families</a></li>
  </ul>
</nav>
<section id="sec-introduction" class="level2">
<h2>Introduction</h2>
<p>This booklet introduces the <code>gamlss.prepdata</code> package and its functionality. It aims to describe the available functions and how they can be used.</p>
<!--  At a later stage, we will try to describe their rational. -->
<p>The latest versions of the packages <strong>gamlss</strong>, <strong>gamlss2</strong> and <strong>gamlss.prepdata</strong> are shown below:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list=</span><span class="fu">ls</span>())</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gamlss)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gamlss2)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gamlss.ggplots)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gamlss.prepdata)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;dplyr&quot;</span>) </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">packageVersion</span>(<span class="st">&quot;gamlss&quot;</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &#39;5.4.23&#39;</code></pre>
</div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">packageVersion</span>(<span class="st">&quot;gamlss2&quot;</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &#39;0.1.0&#39;</code></pre>
</div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">packageVersion</span>(<span class="st">&quot;gamlss.prepdata&quot;</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &#39;0.1.6&#39;</code></pre>
</div>
</div>
</section>
<section id="introduction-to-the-gamlss.prepdata-package" class="level2">
<h2>Introduction to the <code>gamlss.prepdata</code> Package</h2>
<p>The <code>gamlss.prepdata</code> package originated from the <code>gamlss.ggplots</code> package. As <code>gamlss.ggplots</code> became too large for easy maintenance, it was split into two separate packages, and <code>gamlss.prepdata</code> was created.</p>
<p>Since <code>gamlss.prepdata</code> is still at an experimental stage, some functions are hidden to allow time for thorough checking and validation. These hidden functions can still be accessed using the triple colon notation, for example: <code>gamlss.prepdata:::</code>.</p>
<p>The functions available in <code>gamlss.prepdata</code> are intended for pre-fitting — that is, to be used before applying the <code>gamlss()</code> or <code>gamlss2()</code> fitting functions. The available functions can be grouped into the following categories:</p>
<section id="information-functions" class="level4">
<h4><strong>Information</strong> functions</h4>
<p>These functions provide information about:</p>
<pre><code>- The size of the dataset

- The presence and extent of missing values

- The structure of the dataset</code></pre>
<ul>
<li>Whether the variables are numeric or factors, and how they should be prepared for analysis</li>
</ul>
</section>
<section id="plotting-functions" class="level4">
<h4><strong>Plotting</strong> functions</h4>
<p>These functions allow plotting for:</p>
<pre><code>-   individual variables

-   Pairwise relationships between variables.</code></pre>
</section>
<section id="features-functions" class="level4">
<h4><strong>Features</strong> functions</h4>
<p>Functions that assist in</p>
<ul>
<li><p>Detecting outliers</p></li>
<li><p>Applying transformations</p></li>
<li><p>Scaling variables.</p></li>
</ul>
</section>
<section id="data-partition-functions" class="level4">
<h4><strong>Data Partition</strong> functions</h4>
<p>Functions that facilitate partitioning data to improve inference and avoid overfitting during model selection.</p>
</section>
<section id="purpose-and-usage" class="level4">
<h4>Purpose and Usage</h4>
<p>The information and plotting functions provide valuable insights that assist in building better models, including:</p>
<ul>
<li>Understanding the distribution of the <em>response</em> variable</li>
<li>Choosing the appropriate <em>type</em> of analysis</li>
<li>Examining explanatory variables, including:
<ul>
<li>Range and spread of values</li>
<li>Presence of missing values</li>
<li><em>Associations</em> and <em>interactions</em> between explanatory variables</li>
<li>Nature of relationships between response and explanatory variables (<em>linear</em> or <em>non-linear</em>)</li>
</ul></li>
</ul>
<p>The features functions focus on handling outliers, scaling, and transforming explanatory variables (x-variables) before modeling.</p>
<p>Data partitioning is used to avoid overfitting by ensuring models are evaluated more reliably. It falls under the broader category of data manipulation, although merging datasets is not covered here — only partitioning for improved inference is addressed.</p>
<p>Most of the pre-fitting functions are data-related, and their names typically start with data (e.g., <code>data_NAME</code>), indicating that they either print information, produce plots, or manipulate <code>data.frame</code>s.</p>
<p>The <code>gamlss.prepdata</code> package is thus a useful tool for carrying out pre-analysis work before beginning the process of fitting a distributional regression model.</p>
<p>Next, we define what we mean by <strong>distributional regression</strong>.</p>
</section>
</section>
<section id="distributional-regression-model" class="level2">
<h2>Distributional Regression model</h2>
<p>The aim of this vignette is to demonstrate how to manipulate and prepare data before applying a distributional regression analysis.</p>
<p>The general form a distributional regression model can be written as; <span id="eq-GAMLSS_ML"><span class="math display">\[
\begin{split}
\textbf{y}     &amp;  \stackrel{\small{ind}}{\sim }  \mathcal{D}( \boldsymbol{\theta}_1, \ldots, \boldsymbol{\theta}_k) \nonumber \\
g_1(\boldsymbol{\theta}_1) &amp;= \mathcal{ML}_1(\textbf{x}_{11},\textbf{x}_{21}, \ldots,  \textbf{x}_{p1}) \nonumber \\
\ldots &amp;= \ldots \nonumber\\
g_k(\boldsymbol{\theta}_k) &amp;= \mathcal{ML}_k(\textbf{x}_{1k},\textbf{x}_{2k}, \ldots,  \textbf{x}_{pk}).
\end{split}
  \tag{1}\]</span></span> where we assume that the response variable <span class="math inline">\(y_i\)</span> for <span class="math inline">\(i=1,\ldots, n\)</span>, is independently distributed having a distribution <span class="math inline">\(\mathcal{D}( \theta_1, \ldots, \theta_k)\)</span> with <span class="math inline">\(k\)</span> parameters and where all parameters could be effected by the explanatory variables <span class="math inline">\(\textbf{x}_{1},\textbf{x}_{2}, \ldots,  \textbf{x}_{p}\)</span>. The <span class="math inline">\(\mathcal{ML}\)</span> represents <strong>any</strong> regression type machine learning algorithm i.e. LASSO, Neural networks etc.</p>
<p>When only <strong>additive smoothing</strong> terms are used in the fitting the model can be written as; <span id="eq-GAMLSS"><span class="math display">\[\begin{split}
\textbf{y}     &amp;  \stackrel{\small{ind}}{\sim }  \mathcal{D}(  \boldsymbol{\theta}_1, \ldots,  \boldsymbol{\theta}_k) \nonumber \\
g_1( \boldsymbol{\theta}_1)  &amp;= b_{01} + s_1(\textbf{x}_{11})  +  \cdots,  +s_p(\textbf{x}_{p1}) \nonumber\\
\ldots &amp;= \ldots \nonumber\\
g_k( \boldsymbol{\theta}_k)  &amp;= b_{0k} + s_1(\textbf{x}_{1k})  +   \cdots,  +s_p(\textbf{x}_{pk}).
\end{split}
\tag{2}\]</span></span> which is the GAMLSS model introduced by <span class="citation" data-cites="RigbyStasinopoulos05">Rigby and Stasinopoulos (<a href="#ref-RigbyStasinopoulos05" role="doc-biblioref">2005</a>)</span>.</p>
<p>There are three books on GAMLSS, <span class="citation" data-cites="Stasinopoulosetal2017">D. M. Stasinopoulos et al. (<a href="#ref-Stasinopoulosetal2017" role="doc-biblioref">2017</a>)</span>, <span class="citation" data-cites="Rigbyetal2019">Rigby et al. (<a href="#ref-Rigbyetal2019" role="doc-biblioref">2019</a>)</span> and <span class="citation" data-cites="stasinopoulos2024generalized">M. D. Stasinopoulos et al. (<a href="#ref-stasinopoulos2024generalized" role="doc-biblioref">2024</a>)</span> and several ’GAMLSS lecture materials, available from GitHUb, <a href="https://github.com/mstasinopoulos/Porto_short_course.git" class="uri">https://github.com/mstasinopoulos/Porto_short_course.git</a> and <a href="https://github.com/mstasinopoulos/ShortCourse.git" class="uri">https://github.com/mstasinopoulos/ShortCourse.git</a>. The latest <strong>R</strong> packages related to GAMLSS can be found in <a href="https://gamlss-dev.r-universe.dev/builds" class="uri">https://gamlss-dev.r-universe.dev/builds</a>.</p>
<p>The aim of this package is to prepare data and extract useful information that can be utilized during the modeling stage.</p>
</section>
<section id="sec-Information" class="level2">
<h2>Ιnformation functions</h2>
<p>The functions for obtaining information from a dataset are described in this section and summarized in <a href="#tbl-infromation" class="quarto-xref">Table 1</a>. These functions can provide:</p>
<ul>
<li><p>General information about the dataset such as the dimensions (number of rows and columns) and the percentage of omitted (missing) observations</p></li>
<li><p>Information about the variables in the dataset</p></li>
<li><p>Information about the observations in the dataset</p></li>
</ul>
<p>All functions have a <code>data.frame</code> as their first argument.</p>
<p>Here is a table of the information functions;</p>
<div id="tbl-infromation" class="quarto-float quarto-figure quarto-figure-center" data-tbl-colwidths="[50,50]">
<figure class="quarto-float quarto-float-tbl">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-infromation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 1: A summary table of the functions to obtain information
</figcaption>
<div aria-describedby="tbl-infromation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Functions</th>
<th style="text-align: right;">Usage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-dim"><code>data_dim()</code></a></td>
<td style="text-align: right;">Returns the number of rows and columns, and calculates the percentage of omitted (missing) observations</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-names"><code>data_names()</code></a></td>
<td style="text-align: right;">Lists the names of the variables in the dataset</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-rename"><code>data_rename()</code></a></td>
<td style="text-align: right;">Allows renaming of one or more variables in the dataset</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-shorter-names"><code>data_shorter_names()</code></a></td>
<td style="text-align: right;">Allows shortening the names of one or more variables in the dataset</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-distinct"><code>data_distinct()</code></a></td>
<td style="text-align: right;">Displays the number of distinct values for each variable in the dataset</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-which-na"><code>data_which_na()</code></a></td>
<td style="text-align: right;">Displays the count of NA (missing) values for each variable in the dataset</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-omit"><code>data_omit()</code></a></td>
<td style="text-align: right;">Removes all rows (observations) that contain any NA (missing) values</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-str"><code>data_str()</code></a></td>
<td style="text-align: right;">Displays the class of each variable (e.g., numeric, factor, etc.) along with additional details about the variables</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-cha2fac"><code>data_cha2fac()</code></a></td>
<td style="text-align: right;">Converts all character variables in the dataset to factor type</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-few2fac"><code>data_few2fac()</code></a></td>
<td style="text-align: right;">Converts variables with a small number of distinct values (e.g., binary or categorical) to factor type</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-int2num"><code>data_int2num()</code></a></td>
<td style="text-align: right;">Converts integer variables with several distinct values to numeric type to allow for continuous analysis</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-rm"><code>data_rm()</code></a></td>
<td style="text-align: right;">Removes one or more variables (columns) from the dataset as specified by the user</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-rmNAvars"><code>data_rmNAvars()</code></a></td>
<td style="text-align: right;">Removes variables which have NA’s as all its values.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-rm1val"><code>data_rm1val()</code></a></td>
<td style="text-align: right;">Removes factors that have only a single level (no variability) in the dataset</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-select"><code>data_select()</code></a></td>
<td style="text-align: right;">Allows the user to select one or more specific variables (columns) from the dataset for further analysis</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-exclude-class"><code>data_exclude_class()</code></a></td>
<td style="text-align: right;">Removes all variables of a specified class (e.g., factor, numeric) from the dataset</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-only-continuous"><code>data_only_continuous()</code></a></td>
<td style="text-align: right;">Retains only the numeric variables (columns) in the dataset, excluding factors or other variable types</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Next we give examples of the functions.</p>
<section id="sec-data-dim" class="level4">
<h4><code>data_dim()</code></h4>
<p>This function provides detailed information about the dimensions of a <code>data.frame</code>. It is similar to the R function <code>dim()</code>, but with additional details. The output is the original data frame, allowing it to be used in a series of piping commands.</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>rent99 <span class="sc">|&gt;</span> <span class="fu">data_dim</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>************************************************************** 
************************************************************** 
the R class of the data is: data.frame 
the dimensions of the data are: 3082 by 9 
number of observations with missing values: 0 
% of NA&#39;s in the data: 0 % 
************************************************************** 
************************************************************** </code></pre>
</div>
</div>
<p><a href="#tbl-infromation">back to table</a></p>
</section>
<section id="sec-data-names" class="level4">
<h4><code>data_names()</code></h4>
<p>This function provides the names of the variables in the <code>data.frame</code>, similar to the <code>R</code> function <code>names()</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>rent99 <span class="sc">|&gt;</span> <span class="fu">data_names</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>************************************************************** 
************************************************************** 
the names of variables 
[1] &quot;rent&quot;     &quot;rentsqm&quot;  &quot;area&quot;     &quot;yearc&quot;    &quot;location&quot; &quot;bath&quot;     &quot;kitchen&quot; 
[8] &quot;cheating&quot; &quot;district&quot;
************************************************************** 
************************************************************** </code></pre>
</div>
</div>
<p>The output of the function is the original data frame. <a href="#tbl-infromation">back to table</a></p>
</section>
<section id="sec-data-rename" class="level4">
<h4><code>data_rename()</code></h4>
<p>Renames one or more variables (columns) in the <code>data.frame</code> using the function <code>data_rename()</code>;</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>da<span class="ot">&lt;-</span> rent99 <span class="sc">|&gt;</span> <span class="fu">data_rename</span>(<span class="at">oldname=</span><span class="st">&quot;rent&quot;</span>, <span class="at">newname=</span><span class="st">&quot;R&quot;</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(da)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         R   rentsqm area yearc location bath kitchen cheating district
1 109.9487  4.228797   26  1918        2    0       0        0      916
2 243.2820  8.688646   28  1918        2    0       0        1      813
3 261.6410  8.721369   30  1918        1    0       0        1      611
4 106.4103  3.547009   30  1918        2    0       0        0     2025
5 133.3846  4.446154   30  1918        2    0       0        1      561
6 339.0256 11.300851   30  1918        2    0       0        1      541</code></pre>
</div>
</div>
<p>The output of the function is the original data frame with new names.</p>
<p><a href="#tbl-infromation">back to table</a></p>
</section>
<section id="sec-data-shorter-names" class="level4">
<h4><code>data_shorter_names()</code></h4>
<p>If the variables in the dataset have very long names, they can be difficult to handle in formulae during modelling. The function <code>data_shorter_names()</code> abbreviates the names of the explanatory variables, making them easier to use in formulas.</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>rent99 <span class="sc">|&gt;</span> <span class="fu">data_shorter_names</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>************************************************************** 
************************************************************** 
the names of variables 
[1] &quot;rent&quot;  &quot;rents&quot; &quot;area&quot;  &quot;yearc&quot; &quot;locat&quot; &quot;bath&quot;  &quot;kitch&quot; &quot;cheat&quot; &quot;distr&quot;
************************************************************** 
************************************************************** </code></pre>
</div>
</div>
<p>If no long variable names exist in the dataset, the function data_shorter_names() does nothing. However, when applicable, the function abbreviates long names and returns the original data frame with the new shortened names.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that there is a risk when using a small value for the <code>max</code> option, as it may result in identical names for different variables. This could lead to confusion or errors in the modelling process. It is important to carefully choose an appropriate value for <code>max</code> to avoid this issue.</p>
</div>
</div>
<p><a href="#tbl-infromation">back to table</a></p>
</section>
<section id="sec-data-distinct" class="level4">
<h4><code>data_distinct()</code></h4>
<p>TThe distinct values for each variable are shown below.</p>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>rent99 <span class="sc">|&gt;</span> <span class="fu">data_distinct</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    rent  rentsqm     area    yearc location     bath  kitchen cheating 
    2723     3053      132       68        3        2        2        2 
district 
     336 </code></pre>
</div>
</div>
<p>The output of the function is the original data frame.</p>
<p><a href="#tbl-infromation">back to table</a></p>
</section>
<section id="sec-data-which-na" class="level4">
<h4><code>data_which_na()</code></h4>
<p>This function provides information about which variables have missing observations and how many missing values there are for each variable;</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>rent99 <span class="sc">|&gt;</span> <span class="fu">data_which_na</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    rent  rentsqm     area    yearc location     bath  kitchen cheating 
       0        0        0        0        0        0        0        0 
district 
       0 </code></pre>
</div>
</div>
<p>The output of the function is the original data frame nothing is changing.</p>
<p><a href="#tbl-infromation">back to table</a></p>
</section>
<section id="sec-data-omit" class="level4">
<h4><code>data_omit</code></h4>
<p>The function <code>data_str()</code> (similar to the <code>R</code> function <code>str()</code>) provides information about the types of variables present in the dataset.</p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>rent99 <span class="sc">|&gt;</span> <span class="fu">data_omit</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>************************************************************** 
************************************************************** 
the R class of the data is: data.frame 
the dimensions of the data before omition are: 3082 x 9 
the dimensions of the data saved after omition are: 3082 x 9 
the number of observations omited: 0 
************************************************************** 
************************************************************** </code></pre>
</div>
</div>
<p>The output of the function is a new data frame with all NA’s omitted.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>It is important to select the relevant variables before using the data_omit() function, as some unwanted variables may contain many missing values that could lead to unnecessary row omissions.</p>
</div>
</div>
<p><a href="#tbl-infromation">back to table</a></p>
</section>
<section id="sec-data-str" class="level4">
<h4><code>data_str()</code></h4>
<p>The function <code>data_str()</code> (similar to the <strong>R</strong> function <code>str()</code>) provides information about the types of variable exist in the data.</p>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>rent99 <span class="sc">|&gt;</span> <span class="fu">data_str</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>************************************************************** 
************************************************************** 
the structure of the data 
&#39;data.frame&#39;:   3082 obs. of  9 variables:
 $ rent    : num  110 243 262 106 133 ...
 $ rentsqm : num  4.23 8.69 8.72 3.55 4.45 ...
 $ area    : int  26 28 30 30 30 30 31 31 32 33 ...
 $ yearc   : num  1918 1918 1918 1918 1918 ...
 $ location: Factor w/ 3 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;: 2 2 1 2 2 2 1 1 1 2 ...
 $ bath    : Factor w/ 2 levels &quot;0&quot;,&quot;1&quot;: 1 1 1 1 1 1 1 1 1 1 ...
 $ kitchen : Factor w/ 2 levels &quot;0&quot;,&quot;1&quot;: 1 1 1 1 1 1 1 2 1 1 ...
 $ cheating: Factor w/ 2 levels &quot;0&quot;,&quot;1&quot;: 1 2 2 1 2 2 1 2 1 1 ...
 $ district: int  916 813 611 2025 561 541 822 1713 1812 152 ...
************************************************************** 
************************************************************** 
table of the class of variabes 

 factor integer numeric 
      4       2       3 
************************************************************** 
************************************************************** 
distinct values in variables 
    rent  rentsqm     area    yearc location     bath  kitchen cheating 
    2723     3053      132       68        3        2        2        2 
district 
     336 
consider to make those characters vectors into factors: 
location bath kitchen cheating 
************************************************************** 
************************************************************** </code></pre>
</div>
</div>
<p>The output of the function is the original data frame.</p>
<p>The next set of functions manipulate variables withing <code>data.frame</code>s.</p>
<p><a href="#tbl-infromation">back to table</a></p>
</section>
<section id="sec-data-cha2fac" class="level4">
<h4><code>data_cha2fac()</code></h4>
<p>Often, variables in datasets are read as character vectors, but for analysis, they may need to be treated as factors. This function transforms any character vector (with a relatively small number of distinct values) into a factor.</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>rent99 <span class="sc">|&gt;</span> <span class="fu">data_cha2fac</span>()  <span class="ot">-&gt;</span> da </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>************************************************************** 
not character vector was found </code></pre>
</div>
</div>
<p>Since no character were found nothing have changed. The output of the function is a new data frame.</p>
<p><a href="#tbl-infromation">back to table</a></p>
</section>
<section id="sec-data-few2fac" class="level4">
<h4><code>data_few2fac()</code></h4>
<p>There are occasions when some variables have very few distinct observations, and it may be better to treat them as factors. The function <code>data_few2fac()</code> converts vectors with a small number of distinct values into factors.</p>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>rent99 <span class="sc">|&gt;</span>  <span class="fu">data_few2fac</span>() <span class="ot">-&gt;</span> da </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>************************************************************** 
    rent  rentsqm     area    yearc location     bath  kitchen cheating 
    2723     3053      132       68        3        2        2        2 
district 
     336 
************************************************************** 
4 vectors with fewer number of values than 5 were transformed to factors 
************************************************************** 
************************************************************** </code></pre>
</div>
<div class="sourceCode" id="cb29"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(da)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&#39;data.frame&#39;:   3082 obs. of  9 variables:
 $ rent    : num  110 243 262 106 133 ...
 $ rentsqm : num  4.23 8.69 8.72 3.55 4.45 ...
 $ area    : int  26 28 30 30 30 30 31 31 32 33 ...
 $ yearc   : num  1918 1918 1918 1918 1918 ...
 $ location: Factor w/ 3 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;: 2 2 1 2 2 2 1 1 1 2 ...
 $ bath    : Factor w/ 2 levels &quot;0&quot;,&quot;1&quot;: 1 1 1 1 1 1 1 1 1 1 ...
 $ kitchen : Factor w/ 2 levels &quot;0&quot;,&quot;1&quot;: 1 1 1 1 1 1 1 2 1 1 ...
 $ cheating: Factor w/ 2 levels &quot;0&quot;,&quot;1&quot;: 1 2 2 1 2 2 1 2 1 1 ...
 $ district: int  916 813 611 2025 561 541 822 1713 1812 152 ...</code></pre>
</div>
</div>
<p>The output of the function is a new data frame. This can be seen by using the <strong>R</strong> function <code>str()</code>;</p>
<p><a href="#tbl-infromation">back to table</a></p>
</section>
<section id="sec-data-int2num" class="level4">
<h4><code>data_int2num()</code></h4>
<p>Occasionally, we need to convert integer variables with a very large range of values into numeric vectors, especially for graphics. The function <code>data_int2num()</code> performs this conversion.</p>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>rent99 <span class="sc">|&gt;</span> <span class="fu">data_int2num</span>() <span class="ot">-&gt;</span> da</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>************************************************************** 
    rent  rentsqm     area    yearc location     bath  kitchen cheating 
    2723     3053      132       68        3        2        2        2 
district 
     336 
2 integer vectors with more number of values than 50 were transformed to numeric 
************************************************************** </code></pre>
</div>
</div>
<p>The output of the function is a new data frame.</p>
<p><a href="#tbl-infromation">back to table</a></p>
</section>
<section id="sec-data-rm" class="level4">
<h4><code>data_rm()</code></h4>
<p>For plotting datasets, it’s easier to keep only the relevant variables. The function <code>data_rm()</code> allows you to remove unnecessary variables, making the dataset more manageable for visualization.</p>
<div class="cell">
<div class="sourceCode" id="cb33"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data_rm</span>(rent99, <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">9</span>)) <span class="ot">-&gt;</span> da</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(rent99)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3082    9</code></pre>
</div>
<div class="sourceCode" id="cb35"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(da)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3082    7</code></pre>
</div>
</div>
<p>The output of the function is a new data frame. Note that this could be also done using the function <code>select()</code> of the package <strong>dplyr</strong>, or our own <code>data_select()</code> function.</p>
<p><a href="#tbl-infromation">back to table</a></p>
</section>
<section id="sec-data-rmNAvars" class="level4">
<h4><code>data_rmNAvars()</code></h4>
<p>Occutionally when we read data from files in <code>R</code>some extra variables are accidentaly produced with no values but NA’s. The function <code>data_rmNAvars()</code> removes those variables from the data;</p>
<div class="cell">
<div class="sourceCode" id="cb37"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data_rmNAvars</span>(da)</span></code></pre></div>
</div>
<p><a href="#tbl-infromation">back to table</a></p>
</section>
<section id="sec-data-rm1val" class="level4">
<h4><code>data_rm1val()</code></h4>
<p>This function searches for variables with only a single distinct value (often factors left over from a previous <code>subset()</code> operation) and removes them from the dataset.</p>
<div class="cell">
<div class="sourceCode" id="cb38"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>da <span class="sc">|&gt;</span> <span class="fu">data_rm1val</span>()</span></code></pre></div>
</div>
<p>The output of the function is a new data frame.</p>
<p><a href="#tbl-infromation">back to table</a></p>
</section>
<section id="sec-data-select" class="level4">
<h4><code>data_select()</code></h4>
<p>This function selects specified variables from a dataset.</p>
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>da1<span class="ot">&lt;-</span>rent <span class="sc">|&gt;</span> <span class="fu">data_select</span>( <span class="at">vars=</span><span class="fu">c</span>(<span class="st">&quot;R&quot;</span>, <span class="st">&quot;Fl&quot;</span>, <span class="st">&quot;A&quot;</span>))</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(da1)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       R Fl    A
1  693.3 50 1972
2  422.0 54 1972
3  736.6 70 1972
4  732.2 50 1972
5 1295.1 55 1893
6 1195.9 59 1893</code></pre>
</div>
</div>
<p>The output of the function is a new data frame.</p>
<p><a href="#tbl-infromation">back to table</a></p>
</section>
<section id="sec-data-exclude-class" class="level4">
<h4><code>data_exclude_class()</code></h4>
<p>This function searches for variables (columns) of a specified <code>R</code> class and removes them from the dataset. By default, the class to remove is factor.</p>
<div class="cell">
<div class="sourceCode" id="cb41"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>da <span class="sc">|&gt;</span> <span class="fu">data_exclude_class</span>()  <span class="ot">-&gt;</span> da1</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(da1)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      rent area yearc
1 109.9487   26  1918
2 243.2820   28  1918
3 261.6410   30  1918
4 106.4103   30  1918
5 133.3846   30  1918
6 339.0256   30  1918</code></pre>
</div>
</div>
<p>The output of the function is a new data frame.</p>
</section>
<section id="sec-data-only-continuous" class="level4">
<h4><code>data_only_continuous()</code></h4>
<p>This function keeps only the continuous variables in the dataset, removing all non-continuous variables.</p>
<div class="cell">
<div class="sourceCode" id="cb43"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>da <span class="sc">|&gt;</span> <span class="fu">data_only_continuous</span>()  <span class="ot">-&gt;</span> da1</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(da1)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      rent area yearc
1 109.9487   26  1918
2 243.2820   28  1918
3 261.6410   30  1918
4 106.4103   30  1918
5 133.3846   30  1918
6 339.0256   30  1918</code></pre>
</div>
</div>
<p>The output of the function is a new data frame.</p>
<p><a href="#tbl-infromation">back to table</a></p>
</section>
</section>
<section id="sec-Graphical-functions" class="level2">
<h2>Graphical functions</h2>
<p>Graphical methods are used in pre-analysis to examine individual variables or pair-wise relationships between variables.</p>
<div id="tbl-graphical" class="quarto-float quarto-figure quarto-figure-center" data-tbl-colwidths="[50,50]">
<figure class="quarto-float quarto-float-tbl">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-graphical-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 2: A summary table of the graphical functions
</figcaption>
<div aria-describedby="tbl-graphical-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Functions</th>
<th style="text-align: right;">Usage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-plot"><code>data_plot()</code></a></td>
<td style="text-align: right;">Plots each variable in the dataset to visualize its distribution or other important characteristics (see also <a href="#sec-Outliers" class="quarto-xref">Section 6.1</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-bucket"><code>data_bucket()</code></a></td>
<td style="text-align: right;">Generates bucket plots for all numerical variables in the dataset to visualize their skewness and kurtosis</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-response"><code>data_response()</code></a></td>
<td style="text-align: right;">Plots the response variable alongside its z-score, providing a standardized version of the response for comparison</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-zscores"><code>data_zscores()</code></a></td>
<td style="text-align: right;">Plots the z-scores for all continuous variables in the dataset, allowing for easy visualization of the standardized values (see also <a href="#sec-Outliers" class="quarto-xref">Section 6.1</a>)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-xyplot"><code>data_xyplot()</code></a></td>
<td style="text-align: right;">Generates pairwise plots of the response variable against all other variables in the dataset to visualize their relationships</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-cor"><code>data_cor()</code></a></td>
<td style="text-align: right;">Calculates and plots the pairwise correlations for all continuous variables in the dataset to assess linear relationships between them</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-void"><code>data_void()</code></a></td>
<td style="text-align: right;">Searches for pairwise empty spaces across all continuous variables in the dataset to identify problems with interpretation or prediction</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-pcor"><code>data_pcor()</code></a></td>
<td style="text-align: right;">Calculates and plots the pairwise patrial-correlations for all continuous variables in the dataset</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-inter"><code>data_inter()</code></a></td>
<td style="text-align: right;">Searches for potential pairwise interactions between variables in the dataset to identify relationships or dependencies that may be useful for modelling</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-leverage"><code>data_leverage()</code></a></td>
<td style="text-align: right;">Detects outliers in the continuous explanatory variables (x-variables) as a group to highlight unusual observations</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-Ptrans-plot"><code>data_Ptrans_plot()</code></a></td>
<td style="text-align: right;">Plots the response variable against various power transformations of the continuous x-variables to explore potential relationships and model suitability</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Next we give examples of the graphical functions.</p>
<section id="sec-data-plot" class="level4">
<h4><code>data_plot()</code></h4>
<p>The function <code>data_plot</code> plots all the variables of the data individually; It plots the continuous variable as <em>histograms</em> with a density plots superimposed, see the plot for <code>rent</code> and <code>yearc</code>. As an alternative a <code>dot plots</code> can be requested see for an example in <strong>?@sec-data_response</strong>. For integers the function plots <em>needle</em> plots, see <code>area</code> below and for categorical the function plots <em>bar</em> plots, see <code>location</code>, <code>bath</code> <code>kitchen</code> and <code>cheating</code> below.</p>
<div class="cell">
<div class="sourceCode" id="cb45"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>da <span class="sc">|&gt;</span> <span class="fu">data_plot</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values or values outside the scale range
(`geom_bar()`).
Removed 2 rows containing missing values or values outside the scale range
(`geom_bar()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p>The function could saves the <code>ggplot2</code> figures.</p>
<p><a href="#tbl-graphical">back to table</a></p>
</section>
<section id="sec-data-bucket" class="level4">
<h4><code>data_bucket()</code></h4>
<p>The function <code>data_bucket</code> plots bucket plots (which identify skewness and kurosid) for all variables in the data set.</p>
<div class="cell">
<div class="sourceCode" id="cb48"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>da <span class="sc">|&gt;</span> <span class="fu">data_bucket</span>()</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. 
    rent     area    yearc location     bath  kitchen cheating 
    2723      132       68        3        2        2        2 </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p><a href="#tbl-graphical">back to table</a></p>
</section>
<section id="sec-data-response" class="level4">
<h4><code>data_response()</code></h4>
<p>The function <code>data_response()</code> plots four different plots related to a continuous response variable. It plots; i) a histogram (and the density function); ii) a dot plot of the response in the original scale iii) a histogram (and the density function) of the response at the z-scores scale and vi) s dot-plot in the z-score scale.</p>
<p>The z-score scale is defined by fitting a distribution to the variable (normal or SHASH) and then taking the residuals, see also next section. The dot plots are good in identify highly skew variables and unusual observations. They display the median and inter quantile range of the data. The y-axis of a dot plot is a randomised uniform variable (therefore the plot could look slightly different each time.)</p>
<div class="cell">
<div class="sourceCode" id="cb50"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>da <span class="sc">|&gt;</span> <span class="fu">data_response</span>(, <span class="at">response=</span>rent)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. 
the class of the response is numeric is this correct? 
a continuous distribution on (0,inf) could be used </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p><a href="#tbl-graphical">back to table</a></p>
</section>
<section id="sec-data-zscores" class="level4">
<h4><code>data_zscores()</code></h4>
<p>One could fit any four parameter (GAMLSS) distribution, defined on <span class="math inline">\(-\infty\)</span> to <span class="math inline">\(\infty\)</span>, to any continuous variable, where skewness and kurtosis is suspected and take the quantile residuals (or z-scores) as the transformed values x-values. The function <code>y_zscores()</code> performs just this. It takes a continuous variable and fits a continuous four parameter distribution and gives the z-scores. The fitting distribution can be specified by the user, but as default we use the SHASHo distribution. Below we demonstrate that the function y_zscores() is equivalent to fitting the SHASHo distribution to a continuous variable and then take the quqntile residuals from the fitted model as the result.</p>
<div class="cell">
<div class="sourceCode" id="cb52"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>da <span class="sc">|&gt;</span> <span class="fu">data_zscores</span>()</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p>In order to see how the z-scores are calculated consider the function <code>y_zscores()</code> which is taking an individual variables z-scores;</p>
<div class="cell">
<div class="sourceCode" id="cb53"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a> z <span class="ot">&lt;-</span> <span class="fu">y_zscores</span>(rent99<span class="sc">$</span>rent, <span class="at">plot=</span><span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<p>The function is equivalent of fitting a constant model to all the parameters of a given distribution and than taking the quantile residuals (or z=scores) as he variable of interest. The default distribution is the four parameter <code>SHASHo</code> distribution.</p>
<div class="cell">
<div class="sourceCode" id="cb54"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gamlss2)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">gamlssML</span>(rent99<span class="sc">$</span>rent, <span class="at">family=</span>SHASHo) <span class="co"># fitting a 4 parameter distribution </span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(z,<span class="fu">resid</span>(m1))[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]<span class="co">#  and taking the residuals</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          z          
1 -2.496097 -2.496097
2 -1.340464 -1.340464
3 -1.182014 -1.182014
4 -2.526326 -2.526326
5 -2.295069 -2.295069</code></pre>
</div>
</div>
<p><a href="#tbl-graphical">back to table</a></p>
</section>
<section id="sec-data-xyplot" class="level4">
<h4><code>data_xyplot()</code></h4>
<p>The functions <code>data_xyplot()</code> plots the response variable against each of the independent explanatory variables. It plots the continuous against continuous as <em>scatter</em> plots and continuous variables against categorical as <em>box</em> plot.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>At the moment there is no provision for categorical response variables.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb56"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>da <span class="sc">|&gt;</span> <span class="fu">data_xyplot</span>(<span class="at">response=</span>rent )</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;
`geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p>The output of the function saves the <code>ggplot2</code> figures.</p>
<p>Note hat the package <code>gamlss.prepdata</code> do not provides pairwise plot of the explanatory variables themself but the package <code>GGally</code> does. here is an example ;</p>
<div class="cell">
<div class="sourceCode" id="cb59"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally) </span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by &#39;GGally&#39;:
  method from   
  +.gg   ggplot2</code></pre>
</div>
<div class="sourceCode" id="cb61"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>dac <span class="ot">&lt;-</span> gamlss.prepdata<span class="sc">:::</span><span class="fu">data_only_continuous</span>(da) </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(dac, <span class="at">lower=</span><span class="fu">list</span>(<span class="at">continuous =</span> <span class="st">&quot;cor&quot;</span>,</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">combo =</span> <span class="st">&quot;box_no_facet&quot;</span>, <span class="at">discrete =</span> <span class="st">&quot;count&quot;</span>, </span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">na =</span> <span class="st">&quot;na&quot;</span>),<span class="at">upper=</span><span class="fu">list</span>(<span class="at">continuous =</span> <span class="st">&quot;points&quot;</span>, </span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">combo =</span> <span class="st">&quot;box_no_facet&quot;</span>, <span class="at">discrete =</span> <span class="st">&quot;count&quot;</span>, <span class="at">na =</span> <span class="st">&quot;na&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_bw</span>(<span class="at">base_size =</span><span class="dv">15</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p><a href="#tbl-graphical">back to table</a></p>
</section>
<section id="sec-data-cor" class="level4">
<h4><code>data_cor()</code></h4>
<p>The function <code>data_corr()</code> is taking a <code>data.frame</code> object and plot the correlation coefficients of all its continuous variables.</p>
<div class="cell">
<div class="sourceCode" id="cb62"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data_cor</span>(da, <span class="at">lab=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. 
4 factors have been omited from the data </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in data_cor(da, lab = TRUE):</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p>A different type of plot can be produce if we use;</p>
<div class="cell">
<div class="sourceCode" id="cb65"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data_cor</span>(da, <span class="at">method=</span><span class="st">&quot;circle&quot;</span>, <span class="at">circle.size =</span> <span class="dv">40</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. 
4 factors have been omited from the data </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in data_cor(da, method = &quot;circle&quot;, circle.size = 40):</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p>To get the variables with higher, say, than $0.4 $ correlation values use;</p>
<div class="cell">
<div class="sourceCode" id="cb68"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>Tabcor <span class="ot">&lt;-</span> <span class="fu">data_cor</span>(da, <span class="at">plot=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. 
4 factors have been omited from the data </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in data_cor(da, plot = FALSE):</code></pre>
</div>
<div class="sourceCode" id="cb71"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">high_val</span>(Tabcor, <span class="at">val=</span><span class="fl">0.4</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name1  name2  corrs  
[1,] &quot;rent&quot; &quot;area&quot; &quot;0.585&quot;</code></pre>
</div>
</div>
<p>We can plot the path of those variables using the package <code>corr</code>;</p>
<div class="cell">
<div class="sourceCode" id="cb73"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrr)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">network_plot</span>(Tabcor)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p><a href="#tbl-graphical">back to table</a></p>
</section>
<section id="data_association" class="level4">
<h4><code>data_association()</code></h4>
<p>The function <code>data_association()</code> is taking a <code>data.frame</code> object and plot the pair-wise association of all its variables. The pair-wise association for two continuous variables is given by default by the absolute value of the Spearman’s correlation coefficient. For two categorical variables by the (adjusted for bias) Cramers’ <code>v</code>-coefficient. For a continuous against a categorical variables by the <span class="math inline">\(\sqrt R^2\)</span> obtained by regressing the continuous variable against the categorical variable.</p>
<div class="cell">
<div class="sourceCode" id="cb74"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data_association</span>(da, <span class="at">lab=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p>A different type of plot can be produce if we use;</p>
<div class="cell">
<div class="sourceCode" id="cb76"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data_association</span>(da, <span class="at">method=</span><span class="st">&quot;circle&quot;</span>, <span class="at">circle.size =</span> <span class="dv">40</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p>To get the variables with higher, say, than $0.4 $ association values use;</p>
<div class="cell">
<div class="sourceCode" id="cb78"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>Tabcor <span class="ot">&lt;-</span> <span class="fu">data_cor</span>(da, <span class="at">plot=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. 
4 factors have been omited from the data </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in data_cor(da, plot = FALSE):</code></pre>
</div>
<div class="sourceCode" id="cb81"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">high_val</span>(Tabcor, <span class="at">val=</span><span class="fl">0.4</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name1  name2  corrs  
[1,] &quot;rent&quot; &quot;area&quot; &quot;0.585&quot;</code></pre>
</div>
</div>
<p>A different plot can be acheived using the funtion <code>network_plot()</code> of package <code>corr</code>;</p>
<div class="cell">
<div class="sourceCode" id="cb83"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>pp<span class="ot">=</span>gamlss.prepdata<span class="sc">:::</span><span class="fu">data_association</span>(rent[,<span class="sc">-</span><span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">8</span>)], <span class="at">plot=</span>F)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 1969 observations. </code></pre>
</div>
<div class="sourceCode" id="cb85"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrr)</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">network_plot</span>(pp, <span class="at">min_cor =</span> <span class="dv">0</span>, <span class="at">colors =</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>), <span class="at">legend =</span> <span class="st">&quot;range&quot;</span>)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p><a href="#tbl-graphical">back to table</a></p>
</section>
<section id="sec-data-void" class="level4">
<h4><code>data_void()</code></h4>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>This function is new. Its theoretical foundation are not proven yet. The function needs testing and therefore it should be used with causion.</p>
</div>
</div>
<p>The idea behind the functions <code>void()</code> and its equivalent <code>data.frame</code> version <code>data_void()</code> is to be able to identify whether the data in the direction of two continuous variables say <span class="math inline">\(x_i\)</span> and <span class="math inline">\(x_j\)</span> have a lot of empty spaces. The reason is that empty spaces effect prediction since interpolation at empty spaces is dengerous. The function <code>data_void()</code> is taking a <code>data.frame</code> object and plot the percentage of empty spaces for all pair-wise continuous variables. The function used the <code>foreach()</code> function of the package <strong>foreach</strong> to allow parallel processing.</p>
<div class="cell">
<div class="sourceCode" id="cb86"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">registerDoParallel</span>(<span class="at">cores =</span> <span class="dv">9</span>)</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data_void</span>(da)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. 
4 factors have been omited from the data </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in data_void(da):</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p>A different type of plot can be produce if we use;</p>
<div class="cell">
<div class="sourceCode" id="cb89"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data_void</span>(da, <span class="at">method=</span><span class="st">&quot;circle&quot;</span>, <span class="at">circle.size =</span> <span class="dv">40</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. 
4 factors have been omited from the data </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in data_void(da, method = &quot;circle&quot;, circle.size = 40):</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb92"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stopImplicitCluster</span>()</span></code></pre></div>
</div>
<p>To get the variables with highter than $0.4 $ values use;</p>
<div class="cell">
<div class="sourceCode" id="cb93"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>Tabvoid <span class="ot">&lt;-</span> <span class="fu">data_void</span>(da, <span class="at">plot=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. 
4 factors have been omited from the data </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in data_void(da, plot = FALSE):</code></pre>
</div>
<div class="sourceCode" id="cb96"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">high_val</span>(Tabvoid, <span class="at">val=</span><span class="fl">0.4</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name1  name2   corrs  
[1,] &quot;rent&quot; &quot;area&quot;  &quot;0.661&quot;
[2,] &quot;rent&quot; &quot;yearc&quot; &quot;0.627&quot;
[3,] &quot;area&quot; &quot;yearc&quot; &quot;0.51&quot; </code></pre>
</div>
</div>
<p>To plot their paths use;</p>
<div class="cell">
<div class="sourceCode" id="cb98"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrr)</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">network_plot</span>(Tabvoid)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p><a href="#tbl-graphical">back to table</a></p>
</section>
<section id="sec-data-pcor" class="level4">
<h4><code>data_pcor()</code></h4>
<p>The function <code>data_copr()</code> is taking a <code>data.frame</code> object and plot the partial correlation coefficients of all its continuous variables.</p>
<div class="cell">
<div class="sourceCode" id="cb99"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data_pcor</span>(da, <span class="at">lab=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. 
4 factors have been omited from the data </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in data_pcor(da, lab = TRUE):</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p>To get the variables with highter than $0.4 $ partial correlation values use;</p>
<div class="cell">
<div class="sourceCode" id="cb102"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>Tabpcor <span class="ot">&lt;-</span> <span class="fu">data_pcor</span>(da, <span class="at">plot=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. 
4 factors have been omited from the data </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in data_pcor(da, plot = FALSE):</code></pre>
</div>
<div class="sourceCode" id="cb105"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">high_val</span>(Tabpcor, <span class="at">val=</span><span class="fl">0.4</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name1  name2  corrs  
[1,] &quot;rent&quot; &quot;area&quot; &quot;0.638&quot;</code></pre>
</div>
</div>
<p>For plotting you can use;</p>
<div class="cell">
<div class="sourceCode" id="cb107"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrr)</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="fu">network_plot</span>(Tabpcor)</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p><a href="#tbl-graphical">back to table</a></p>
</section>
<section id="sec-data-inter" class="level4">
<h4><code>data_inter()</code></h4>
<p>The function <code>data_inter()</code> takes a <code>data.frame</code>, fits all pair-wise interactions of the explanatory variables against the response (using a normal model) and produce a graph displaying their significance levels. The idea behind this is to identify possible first order interactions at an early stage of the analysis.</p>
<div class="cell">
<div class="sourceCode" id="cb108"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>da <span class="sc">|&gt;</span> gamlss.prepdata<span class="sc">:::</span><span class="fu">data_inter</span>(<span class="at">response=</span> rent)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb110"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>tinter <span class="ot">&lt;-</span>gamlss.prepdata<span class="sc">:::</span><span class="fu">data_inter</span>(da,  <span class="at">response=</span> rent, <span class="at">plot=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. </code></pre>
</div>
<div class="sourceCode" id="cb112"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>tinter</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         area yearc location  bath kitchen cheating
area       NA 0.014    0.001 0.119   0.000    0.000
yearc      NA    NA    0.000 0.027   0.154    0.226
location   NA    NA       NA 0.000   0.000    0.578
bath       NA    NA       NA    NA   0.868    0.989
kitchen    NA    NA       NA    NA      NA    0.719
cheating   NA    NA       NA    NA      NA       NA</code></pre>
</div>
</div>
<p>To get the variables with lower than $0.05 $ significant interactions use;</p>
<div class="cell">
<div class="sourceCode" id="cb114"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>Tabinter <span class="ot">&lt;-</span> gamlss.prepdata<span class="sc">:::</span><span class="fu">data_inter</span>(da, <span class="at">response=</span> rent, <span class="at">plot=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. </code></pre>
</div>
<div class="sourceCode" id="cb116"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="fu">low_val</span>(Tabinter)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     name1      name2      value  
[1,] &quot;area&quot;     &quot;yearc&quot;    &quot;0.014&quot;
[2,] &quot;area&quot;     &quot;location&quot; &quot;0.001&quot;
[3,] &quot;yearc&quot;    &quot;location&quot; &quot;0&quot;    
[4,] &quot;yearc&quot;    &quot;bath&quot;     &quot;0.027&quot;
[5,] &quot;location&quot; &quot;bath&quot;     &quot;0&quot;    
[6,] &quot;area&quot;     &quot;kitchen&quot;  &quot;0&quot;    
[7,] &quot;location&quot; &quot;kitchen&quot;  &quot;0&quot;    
[8,] &quot;area&quot;     &quot;cheating&quot; &quot;0&quot;    </code></pre>
</div>
</div>
<p><a href="#tbl-graphical">back to table</a></p>
<p>NOT DOCUMENTED IN HELP FOR THIS FUNCTION</p>
</section>
<section id="sec-data-leverage" class="level4">
<h4><code>data_leverage()</code></h4>
<p>The function <code>data_leverage()</code> uses the linear model methodology to identify posible unusual observations within the explanatory variables as a group (not indivisually). It fit a linear (normal) model with response, the response of the data, and all explanatory variables in the data, as x’s. It then calculates the leverage points and plots them. A leverage is a number between zero and 1. Large leverage correspond to extremes in the x’s.</p>
<div class="cell">
<div class="sourceCode" id="cb118"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>rent99[, <span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">9</span>)] <span class="sc">|&gt;</span> <span class="fu">data_leverage</span>( <span class="at">response=</span>rent)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. </code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The horizontal line is the plot is at point <span class="math inline">\(2 \times (r/n)\)</span>, which is the threshold suggested in the literature; values beyond this point could be identified as extremes. It looks that the point <span class="math inline">\(2 \times (r/n)\)</span> is too low (at least for our data). Instead the plot identify only observation which are in the one per cent upper quantile. That is a quantile value of the leverage at value 0.99.</p>
</div>
</div>
<p><a href="#sec-data-leverage-1" class="quarto-xref">Section 6.1.3</a> show how the information of the function <code>data_leverage()</code> can be combined with the information given by <code>data_outliers()</code> in order to confirm hight outliers in the data.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>What happen if multiple response are in the data?</p>
</div>
</div>
<p><a href="#tbl-graphical">back to table</a></p>
</section>
<section id="sec-data-Ptrans-plot" class="level4">
<h4><code>data_Ptrans_plot()</code></h4>
<p>The essence of this plot is to visually decide whether certain values of <span class="math inline">\(\lambda\)</span> in a power transformation are appropriate or not. <a href="#sec-Transformations" class="quarto-xref">Section 6.3</a> describes the power transformation, <span class="math inline">\(T=X^\lambda\)</span> for <span class="math inline">\(\lambda&gt;0\)</span>, in more details. For each continuous explanatory variable <span class="math inline">\(X\)</span>, the function show the response against <span class="math inline">\(X\)</span>, (<span class="math inline">\(\lambda=1\)</span>), the response against the square root of <span class="math inline">\(X\)</span>, (<span class="math inline">\(\lambda=1/2\)</span>) and the response against the log of <span class="math inline">\(X\)</span> (<span class="math inline">\(\lambda \rightarrow 0\)</span>). The user then can decide whether any of those transformation are appropriate.</p>
<div class="cell">
<div class="sourceCode" id="cb120"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>gamlss.prepdata<span class="sc">:::</span><span class="fu">data_Ptrans_plot</span>(da, rent) </span></code></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p>It look that no transformation is needed for the continuous explanatory variables <code>area</code> of <code>yearc</code>.</p>
<p><a href="#tbl-graphical">back to table</a></p>
</section>
</section>
<section id="sec-Features" class="level2">
<h2>Features</h2>
<p>The features functions are functions to help with the continuous explanatory x-variables; We divide them here in four sections; Functions for</p>
<ul>
<li><p><code>outliers</code>;</p></li>
<li><p><code>scaling</code>;</p></li>
<li><p><code>transformations</code> and</p></li>
<li><p>function approproate for <code>time series</code></p></li>
</ul>
<p>The available functions are;</p>
<div id="tbl-features" class="quarto-float quarto-figure quarto-figure-center" data-tbl-colwidths="[50,50]">
<figure class="quarto-float quarto-float-tbl">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-features-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 3: The outliers, scalling, transformation and time series functions
</figcaption>
<div aria-describedby="tbl-features-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Functions</th>
<th style="text-align: right;">Usage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-y-outliers"><code>y_outliers()</code></a></td>
<td style="text-align: right;">identify possible outliers in a continuous variable (see below)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-outliers"><code>data_outliers()</code></a></td>
<td style="text-align: right;">identify possible outliers for all continuous x-variable (see also <code>data_zscores</code> in <a href="#sec-data-zscores" class="quarto-xref">Section 5.0.4</a>)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-leverage-1"><code>data_leverage()</code></a></td>
<td style="text-align: right;">this is a repear of the function from <a href="#sec-data-leverage" class="quarto-xref">Section 5.0.11</a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-scale"><code>data_scale()</code></a></td>
<td style="text-align: right;">scaling all continuous x-variables either to zero mean and one s.d. or to the range [0,1]</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-xy-Ptrans"><code>xy_Ptrans()</code></a></td>
<td style="text-align: right;">looking for appropriate power transformation for response against one of the x-variable</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-Ptrans"><code>data_Ptrans()</code></a></td>
<td style="text-align: right;">looking for appropriate power transformation for response against all x-variable</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#data-Ptrans-plot"><code>data_Ptrans_plot()</code></a></td>
<td style="text-align: right;">plotting all x’s agains the response using identiti ty square root ans log transormations</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<section id="sec-Outliers" class="level3">
<h3>Outliers</h3>
<p>Outliers in the response variable, within a distributional regression framework like GAMLSS, are better handled by selecting an appropriate distribution for the response. For example, an outlier under the assumption of a normal distribution for the response may no longer be considered an outlier if a distribution from the t-family is assumed. The function <code>data_response()</code>, discussed in <a href="#sec-data-response" class="quarto-xref">Section 5.0.3</a> provides guidelines on appropriate actions. This section focuses on outliers in the explanatory variables.</p>
<p>Outliers in the continuous explanatory variables can potentially affect curve fitting, whether using linear or smooth non-parametric terms. In such cases, removing outliers from the x-variables can make the model more robust. Outliers are observations that deviate significantly from the rest of the data, but the concept depends on the dimension being considered. An single observation value might be an outlier within an explanatory variable. A pair observation might be an outlier examining within a pair-wise relationships. In a one-dimensional search, we identify extreme observations in individual continuous variables, based on how far they lie from the majority of the data. In a two-dimensional search, we look for outliers in pairwise plots of continuous variables, examining how observations deviate from typical relationships between variable pairs. Leverage points are useful to identify outliers when we look for outliers in <span class="math inline">\(r\)</span> dimension when <span class="math inline">\(r\)</span> is the number of explanatory variables.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>At this preliminary stage of the analysis, where no model has yet been fitted, it is difficult to identify outliers among factors. This is because outliers in factors typically do not appear unusual when examining individual variables. Their outlier status usually becomes apparent only when considered in combination with other variables or factors. Identifying such outliers is a task better suited for the modelling stage of the analysis.</p>
</div>
</div>
<p>The function <code>y_outliers()</code> in <a href="#sec-y-outliers" class="quarto-xref">Section 6.1.1</a> uses a simple algorithm to identify potential one-dimensional outliers in continuous explanatory variables. It is designed specifically for continuous variables.</p>
<ul>
<li><p>For variables defined on the full real line, (i.e., from <span class="math inline">\(-\infty\)</span> to <span class="math inline">\(+\infty\)</span>, the algorithm fits a parametric distribution—by default, the four-parameter <code>SHASHo</code> distribution—and computes z-scores (quantile residuals) to assess outlier status.</p></li>
<li><p>For variables defined on the positive real line (i.e., from <span class="math inline">\(0\)</span> to <span class="math inline">\(+ \infty\)</span>), an additional transformation step is included. These variables are often highly right-skewed, and extreme values in the right tail can dominate any outlier detection process. To address this, the function attempts to find a power transformation <span class="math inline">\(T = X^\lambda\)</span> that minimizes the Jarque-Bera test statistic—a measure of deviation from normality. To find the optimal power parameters <span class="math inline">\(\lambda\)</span> the function <code>y_outliers()</code> uses the internal function <code>x_Ptrans()</code>. After this transformation, the <code>SHASHo</code> distribution is fitted, and z-scores are computed. The Jarque-Bera test statistic is always non-negative; the further it is from zero, the stronger the evidence against normality. The goal is to reduce skewness and kurtosis in the data before assessing outliers.</p></li>
</ul>
<p>Outliers are identify for observations with very low or hight z-scores. For example, if a z-scores is greater in absolute value to a specified value say 3. The methodology is appropriate for identifying outliers in one dimension. Pair-wise scatter plots of all continuous variables in the data can be use to identify outliers in two dimensions. To identify outliers in <span class="math inline">\(p\)</span> dimensions the function <code>data_leverage()</code>, see <a href="#sec-data-leverage-1" class="quarto-xref">Section 6.1.3</a>, can be used.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Several of the graphical functions described in <a href="#sec-Graphical-functions" class="quarto-xref">Section 5</a> are good for identify visualy outliers. In fact we recommend that the function <code>data_outliers()</code> should be used in combination with functions like <code>data_plot()</code> or <code>data_zscores()</code>.</p>
</div>
</div>
<section id="sec-y-outliers" class="level4">
<h4><code>y_outliers()</code></h4>
<p>The function <code>y_outliers()</code> identify outliers in one <span class="math inline">\(X\)</span> variable.</p>
<div class="cell">
<div class="sourceCode" id="cb121"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">y_outliers</span>(da<span class="sc">$</span>rent)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>named numeric(0)</code></pre>
</div>
</div>
<p>Note that the <code>y_outliers()</code> is used by <code>data_outliers()</code> to identify outliers in all continuous variables in the data.</p>
<p><a href="#tbl-features">back to table</a></p>
</section>
<section id="sec-data-outliers" class="level4">
<h4><code>data_outliers()</code></h4>
<p>The function <code>data_outliers()</code> uses the <em>z-scores</em> technique described above in order to detect outliers in the continuous variables in the data. It fits a <code>SHASHo</code> distribution to the continuous variable in the data and uses the z-scores (quantile residuals) to identify (one dimension) outliers for those continuous variables.</p>
<div class="cell">
<div class="sourceCode" id="cb123"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data_outliers</span>(da)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    rent     area    yearc location     bath  kitchen cheating 
    2723      132       68        3        2        2        2 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$rent
named numeric(0)

$area
named integer(0)

$yearc
named numeric(0)</code></pre>
</div>
</div>
<p>As it happen no individual variable outliers were highlighted in the <code>rent</code> data using the z-scores methodology. In general we recommend the function <code>data_outliers()</code> to be used in combination of the graphical functions <code>data_plot()</code> and <code>data_zscores()</code></p>
<p><a href="#tbl-features">back to table</a></p>
</section>
<section id="sec-data-leverage-1" class="level4">
<h4><code>data_leverage()</code> (repeat)</h4>
<p>The function <code>data_leverage()</code>, fisrt describe in <a href="#sec-data-leverage" class="quarto-xref">Section 5.0.11</a>, can be used to detect extremes in the continuous variables in the data by fiting a linear model with all the continuous variables in the data and then useing the higher leverage points to identify (multi-dimension) outliers for the observations for all continuous variables. By default, it identifies one percent of the observations with high leverage in the data. Here we use the function as a way to identify the obsrvation (not plottoing).</p>
<div class="cell">
<div class="sourceCode" id="cb126"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data_leverage</span>(da, <span class="at">response=</span>rent, <span class="at">plot=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   38  162  176  204  206  242  454  496  541  651  696  794  910  942 1094
[16] 1296 1384 1388 1782 1837 1875 1907 1970 2530 2540 2727 2810 2890 2977 3065
[31] 3070</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The function<code>data_leverage()</code> always identifies the top one percent of observations with the highest leverage, which may or may not be outliers. These high-leverage points can have a strong influence on model estimates. To better assess their impact, the list of high-leverage observations returned by <code>data_leverage()</code> should be compared with the list of outliers identified by the <code>data_outliers()</code> function. Observations that appear in both lists are particularly noteworthy, as they may be influential outliers that warrant further investigation.</p>
</div>
</div>
<p>Next we are trying the proceess of identifing if data with high leverage are also coincide with outliers identified using the function <code>data_outliers()</code> function. The function <code>intersect()</code> will flash out the intersection of the two set of observations. First use <code>data_outliers()</code></p>
<div class="cell">
<div class="sourceCode" id="cb129"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>ul <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">data_outliers</span>(da))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    rent     area    yearc location     bath  kitchen cheating 
    2723      132       68        3        2        2        2 </code></pre>
</div>
</div>
<p>then <code>data_leverage()</code>;</p>
<div class="cell">
<div class="sourceCode" id="cb131"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>ll<span class="ot">&lt;-</span><span class="fu">data_leverage</span>(da, <span class="at">response=</span>rent, <span class="at">plot=</span><span class="cn">FALSE</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. </code></pre>
</div>
</div>
<p>and finally we inspect the intersection of the two sets using <code>intersect()</code>;</p>
<div class="cell">
<div class="sourceCode" id="cb133"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">intersect</span>(ll,ul)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>numeric(0)</code></pre>
</div>
</div>
<p>Here we have zero outliers but in general we would expect to find common observations for further checking.</p>
<p><a href="#tbl-features">back to table</a></p>
</section>
</section>
<section id="sec-Scaling" class="level3">
<h3>Scaling</h3>
<p>Scaling is another form of transformation for the continuous explanatory variables in the data which brings the explanatory variables in the same scale. It is a form of <strong>standardization</strong>. Standardization means bringing all continuous explanatory variables to similar range of values. For some machine learning techniques, i.e., principal component regression or neural networks standardization is mandatory in other like LASSO is recommended. There are two types of standardisation</p>
<ol type="i">
<li><p><em>scaling to normality</em> and</p></li>
<li><p><em>scaling to a range from zero to one</em>.</p></li>
</ol>
<p>Scaling to normality it means that the variable should have a mean zero and a standard deviation one. Note that, this is equivalent of fitting a Normal distribution to the variables and then taking the z-scores (residuals) of the fit as the transformed variable. The problem with this type of scaling is that skewness and kurtosis in the standardised data persist. One could go further and fit a four parameter distribution instead of a normal where the two extra parameters could account for skewness and kurtosis. The function <code>data_scale()</code> described in <a href="#sec-data-scale" class="quarto-xref">Section 6.2.1</a> it gives this option with te argument <code>family</code> in which can used to specify a different distribution.</p>
<section id="sec-data-scale" class="level4">
<h4><code>data_scale()</code></h4>
<p>The function <code>data_scale()</code> perform scaling to all continuous variables an a data set. Note that factors in the data set are left untouched because when fitted within a model they will be transform to dummy variable which take values 0 or 1 (a kind of standardization). The response is left also untouched because it is assumed that an appropriate distribution will be fitted. The response variable has to be declared using the argument <code>response.</code> First we use <code>data_scale()</code> to scale to normality.</p>
<div class="cell">
<div class="sourceCode" id="cb135"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">data_scale</span>(da, <span class="at">response=</span>rent))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    area    yearc location     bath  kitchen cheating 
     132       68        3        2        2        2 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>      rent       area      yearc location bath kitchen cheating
1 109.9487  0.7009962  0.7035881        2    0       0        0
2 243.2820 -0.4796117  0.7484206        2    0       0        1
3 261.6410 -0.2266243  0.6587556        1    0       0        1
4 106.4103 -0.3531180 -1.2242096        2    0       0        0
5 133.3846  0.1950214 -1.7173671        2    0       0        1
6 339.0256 -0.5639408  1.6450707        2    0       0        1</code></pre>
</div>
</div>
<p>As we mention before scaling to normality is equivalent of fitting a Normal variable first. The problem with scaling to normality is that if the variables are highly skew or kurtotic scaling them to normality does correct for skewness or kurtosis. Using a parametric distribution with four parameters some of which are skewness and kurtosis parameters it may correct that. Next we standardised using the <code>SHASHo</code> distribution;</p>
<div class="cell">
<div class="sourceCode" id="cb138"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">data_scale</span>(da, <span class="at">response=</span>rent,  <span class="at">family=</span><span class="st">&quot;SHASHo&quot;</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    area    yearc location     bath  kitchen cheating 
     132       68        3        2        2        2 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>      rent       area      yearc location bath kitchen cheating
1 109.9487  0.7390434  0.6323846        2    0       0        0
2 243.2820 -0.3940193  0.6795499        2    0       0        1
3 261.6410 -0.1175129  0.5864434        1    0       0        1
4 106.4103 -0.2526941 -1.0598183        2    0       0        0
5 133.3846  0.2949483 -1.6281459        2    0       0        1
6 339.0256 -0.4916986  2.0610405        2    0       0        1</code></pre>
</div>
</div>
<p>The second form od standardisation is to transform all continuous x-variables to a range zero to one. Here is how this is done;</p>
<div class="cell">
<div class="sourceCode" id="cb141"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">data_scale</span>(da, <span class="at">response=</span>rent,  <span class="at">scale.to=</span><span class="st">&quot;0to1&quot;</span>))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    area    yearc location     bath  kitchen cheating 
     132       68        3        2        2        2 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>      rent       area yearc location bath kitchen cheating
1 109.9487 0.04285714     0        2    0       0        0
2 243.2820 0.05714286     0        2    0       0        1
3 261.6410 0.07142857     0        1    0       0        1
4 106.4103 0.07142857     0        2    0       0        0
5 133.3846 0.07142857     0        2    0       0        1
6 339.0256 0.07142857     0        2    0       0        1</code></pre>
</div>
</div>
<p><a href="#tbl-features">back to table</a></p>
</section>
</section>
<section id="sec-Transformations" class="level3">
<h3>Transformations</h3>
<p>In the context of outliers, the focus on how far a single observation deviates from the rest of the data. However, when considering <strong>transformations</strong>, the goal shifts toward a better capturing of the relationship between a continuous predictor and the response variable. Specifically, we aim to model <strong>peaks and troughs</strong> in the relationship between a single x-variable and the response better. To achieve this, it is sometimes sufficient to stretch the x-axis so that the predictor variable is more evenly distributed within its its range. A common approach for this is to use a power transformation of the form <span class="math inline">\(T = X^\lambda\)</span>. This transoformation can reduce the curvature in the response and make the curve fitting easier. Importantly, the power transformation smoothly transitions into a logarithmic transformation as <span class="math inline">\(\lambda \to 0\)</span>, since: <span class="math inline">\(\frac{X^{\lambda} - 1} {\lambda} \rightarrow \log(X) \quad \text{as } \lambda \to 0\)</span>. Thus, in the limit as <span class="math inline">\(\lambda \to 0\)</span> is the power traformation is the log transformation <span class="math inline">\(T = \log(X)\)</span>.</p>
<!-- In the context of outliers, we focus on how far an observation is from the rest of the data. However, in the case of transformations, we are more concerned with how to best capture the relationship between a continuous variable in the data and the response. More precisely, we are interest to be able to capture  better peaks and troughs in the relation between one single x and the response.  To do that, sometime it is sufficient to stretch the x-axis in such a way the x-variable is more evenly distributed within its range. A power transformation, $T=X^\lambda$ on the x-variable can achieve this. Often the pawer  transformation makes the  hight curvative in the response to disappear.  Now since $(X^{\lambda} - 1) / \lambda \rightarrow \log X$ as $\lambda \rightarrow 0$ one can assume at the limit of the transformation while lambda goes to zero   the log transformation  $T = \log(X).$ -->
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The power transformation is a subclass of the shifted power transformation<br />
<span class="math inline">\(T = (\alpha + X)^\lambda\)</span> which is not consider here</p>
</div>
</div>
<p>The aim of the power transformation is to make the model fitting process more robust and reliable and maximizing the information extracted from the data. There are three different functions in <code>gamlss.prepdata</code> dealling with power transformations, <code>xy_Ptrans()</code>, <code>data_Ptrans()</code> and <code>data_Ptrans_plot()</code></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>It’s important to distinguish between the concepts of <em>transformations</em> (the subject of this section) and of <em>feature extraction</em>, a term often used in machine learning. We refer to transformations as functions applied to a individual explanatory variables while we use feature extraction when multiple explanatory variables are involved. In both cases, the goal is to enhance the model capabilities.</p>
</div>
</div>
<section id="sec-xy-Ptrans" class="level4">
<h4><code>xy_Ptrans()</code></h4>
<div class="cell">
<div class="sourceCode" id="cb144"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>gamlss.prepdata<span class="sc">:::</span><span class="fu">xy_Ptrans</span>(da<span class="sc">$</span>area, da<span class="sc">$</span>rent) </span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb145"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>gamlss.prepdata<span class="sc">:::</span><span class="fu">xy_Ptrans</span>(da<span class="sc">$</span>area, da<span class="sc">$</span>rent, <span class="at">prof=</span><span class="cn">TRUE</span>, <span class="at">k=</span><span class="dv">4</span>) </span></code></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
</section>
<section id="sec-data-Ptrans" class="level4">
<h4><code>data_Ptrans()</code></h4>
<div class="cell">
<div class="sourceCode" id="cb146"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>gamlss.prepdata<span class="sc">:::</span><span class="fu">data_Ptrans</span>(da, <span class="at">response=</span>rent)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 100 % of data are saved, 
that is, 3082 observations. </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>$area
[1] 1.06212

$yearc
[1] 1.499942</code></pre>
</div>
</div>
<p><a href="#tbl-features">back to table</a></p>
</section>
<section id="sec-data-Ptrans-1" class="level4">
<h4><code>data_Ptrans_plot()</code> (repeat)</h4>
<div class="cell">
<div class="sourceCode" id="cb149"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>gamlss.prepdata<span class="sc">:::</span><span class="fu">data_Ptrans_plot</span>(da, rent) </span></code></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p><a href="#tbl-features">back to table</a></p>
</section>
</section>
<section id="sec-Timeseries" class="level3">
<h3>Time series</h3>
<p>Time series data sets consist of observations collected at consistent time intervals—e.g., daily, weekly, or monthly. These data require special treatment because observations that are closer together in time tend to be more similar, violating the usual assumption of independence between observations. A similar issue arises in spatial data sets, where observations that are geographically closer often exhibit spatial correlation, again violating independence.</p>
<p>Many data sets include spatial or temporal features —such as longitude and latitude or timestamps (e.g., 12/10/2012)— those variables are can be used for for modeling directly, but also for interpreting or visualization of the results. If temporal or spatial information exists in the data, it is essential to ensure these features are correctly read and interpreted in <code>R</code>. For instance, dates in <code>R</code> can be handled using the <code>as.Date()</code> function. To understand its functionality and options associated with the function please consult the help documentation via <code>help("as.Date")</code>. Below, we provide two simple functions of how to work with date-time variables.</p>
<section id="sec-time-dt2dhour" class="level4">
<h4><code>time_dt2dhour()</code></h4>
<p>Suppose the variable <code>dt</code> contains both a date and a time. We may want to extract and separate this into two components: one containing the date, and another capturing the hour of the day.</p>
<div class="cell">
<div class="sourceCode" id="cb150"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;01/01/2011 00:00&quot;</span>, <span class="st">&quot;01/01/2011 01:00&quot;</span>, <span class="st">&quot;01/01/2011 02:00&quot;</span>, <span class="st">&quot;01/01/2011 03:00&quot;</span>, <span class="st">&quot;01/01/2011 04:00&quot;</span>, <span class="st">&quot;01/01/2011 05:00&quot;</span>) </span></code></pre></div>
</div>
<p>The function to do this separation can lok like;</p>
<div class="cell">
<div class="sourceCode" id="cb151"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>time_dt2dhour <span class="ot">&lt;-</span> <span class="cf">function</span>(datetime, <span class="at">format=</span><span class="cn">NULL</span>) </span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>  { </span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>          X <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">as.data.frame</span>(<span class="fu">strsplit</span>(datetime,<span class="st">&#39; &#39;</span>))) </span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(X) <span class="ot">&lt;-</span> <span class="cn">NULL</span> </span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(X) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;date&quot;</span>, <span class="st">&quot;time&quot;</span>) </span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a>       hour <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">&quot;:&quot;</span>,<span class="st">&quot;.&quot;</span>,X[,<span class="dv">2</span>])) </span>
<span id="cb151-7"><a href="#cb151-7" aria-hidden="true" tabindex="-1"></a>      date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(X[,<span class="dv">1</span>],<span class="at">format=</span>format) </span>
<span id="cb151-8"><a href="#cb151-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">data.frame</span>(date, hour) </span>
<span id="cb151-9"><a href="#cb151-9" aria-hidden="true" tabindex="-1"></a>  } </span></code></pre></div>
</div>
<div class="cell">
<div class="sourceCode" id="cb152"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>P <span class="ot">&lt;-</span> <span class="fu">time_dt2dhour</span>(dt, <span class="st">&quot;%d/%m/%Y&quot;</span>) </span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>P</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        date hour
1 2011-01-01    0
2 2011-01-01    1
3 2011-01-01    2
4 2011-01-01    3
5 2011-01-01    4
6 2011-01-01    5</code></pre>
</div>
</div>
</section>
<section id="sec-time-2num" class="level4">
<h4><code>time_2num()</code></h4>
<p>The second example contains time given in its common format, <code>c("12:35", "10:50")</code> and we would like t change it to numeric which we can use in the model.</p>
<div class="cell">
<div class="sourceCode" id="cb154"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;12:35&quot;</span>, <span class="st">&quot;10:50&quot;</span>)</span></code></pre></div>
</div>
<p>The function to change this to numeric;</p>
<div class="cell">
<div class="sourceCode" id="cb155"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>time_2num <span class="ot">&lt;-</span> <span class="cf">function</span>(time, <span class="at">pattern=</span><span class="st">&quot;:&quot;</span>) </span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>  { </span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>  t <span class="ot">&lt;-</span> <span class="fu">gsub</span>(pattern, <span class="st">&quot;.&quot;</span>, time) </span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">as.numeric</span>(t) </span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>  } </span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a><span class="fu">time_2num</span>(t) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12.35 10.50</code></pre>
</div>
</div>
<p>For user who deal with a lot of time series try the function <code>POSXct()</code> and also the function <code>select()</code> from the <code>dplur</code> package.</p>
</section>
</section>
</section>
<section id="sec-Partition" class="level2">
<h2>Data Partition</h2>
<section id="sec-Intro-Partition" class="level3">
<h3>Introdunction to data partition</h3>
<p>Partitioning the data is essential for comparing different models and checking for overfitting. Figure <a href="#fig-data_split" class="quarto-xref">Figure 1</a> illustrates the different ways the data can be split. A dataset can be split multiple times or just once, depending on the size of the dataset. For large datasets, it is common to split the data into a training set and a test set, and, if necessary, a validation set. Observations in the training set are referred to as in-bag<code>, while observations in the test or validation set are termed</code>out-of-bag`.</p>
<p>The training set is used for fitting the model, the test set is used for prediction and comparison between models, and the validation set is used for tuning the model’s <code>hyperparameters</code>. In additive smoothing regression models, for instance, the hyperparameters refer to the <code>smoothing</code> parameters in the model. Data partitioning allows for performance evaluation, model assumption checks, and detection of overfitting.</p>
<p>If the fitted model performs reasonably well on both the training and test sets, one can be confident that overfitting has been avoided. Overfitting occurs when a model fails to generalize well to new data, typically because it is too closely fitted to the sample data. In contrast, underfitting refers to a poor model that fails to capture the essential patterns in the data, resulting in a model that is distant from both the sample and the population it is intended to represent.</p>
<!-- Partitioning the data is useful for comparing different models and check for overfitting. @fig-data_split shows different ways the data can be split. A data set can be either split multiple times or split once. For big data sets often the sample data is split once into `training`, and `test` data sets and if needed into a `validation` set. Observations in the the training set are often called **in-bag** and observations in the test set (or validation set) called **out-of-bag**. The training data set is used for fitting the model, test data for prediction and possible comparing the different models and validation for tuning hyper parameters of the model. Note that in additive smoothing regression models the hyper parameters are the smoothing parameters in the model. Splitting the data allows checking the performance, the suitability of the assumptions of the model and for overfitting. If the fitted model, in the training, data set perform reasonable also in the `test` data set then one could feel that **overfitting** has been avoided. Overfitting occurs when the model do not generalised well in new data. This often means that the model is too close to the sample data. By **underfitting**, we mean a bad model, a model which is unable to capture the most important feature in the data. A model which is far from both the sample but also from the population which suppose to represent. -->
<p>Various goodness-of-fit measures can be used to check and compare different distributional regression models. One of the most popular methods is the Generalized Akaike Information Criterion (GAIC). To calculate the GAIC, only the in-bag data are required, meaning there is no need for data partitioning. However, calculating the GAIC requires an accurate measure of the degrees of freedom used to fit the model. In mathematical (stochastic) models, the degrees of freedom are straightforward to define as they correspond to the number of estimated parameters. In contrast, for algorithmic models, particularly over-parameterized ones like neural networks, estimating degrees of freedom is more challenging. In mathematical models, the degrees of freedom serve as a measure of the model’s complexity. More complex models are typically closer to the training data, which may reduce their ability to generalize well to new data.</p>
<p>In addition to GAIC, other commonly used goodness-of-fit measures for regression models include the deviance, <span class="math inline">\(R^2\)</span>, and mean squared error (MSE), among others. However, these measures are prone to overfitting when evaluated on the in-bag dataset rather than on the out-of-bag data. Furthermore, <span class="math inline">\(R^2\)</span> may not generalize well to non-normal error distributions, and MSE (and its variations) is often inappropriate for distributional regression models. This is because MSE focuses primarily on the location parameters of the response distribution, while other aspects of the response distribution are often of greater interest to practitioners.</p>
<!-- There are different goodness of fit for checking and comparing different distributional regression models. The generalised Akaike criterion, **GAIC** is a very popular method. To calculate the GAIC only the *in-bag* data are needed there is no need for data partition. Calculating the GAIC needs though an accurate measure of the *degrees of freedom* used to fit the model. In mathematical (stochatic) models the degrees of freedom are easy to define because they are the number of estimated parameters. In algorithmic based models, especially the ones overparametrised like neural networks, the degrees of freedom are more difficult to guess. The degrees of freedoms (at least for mathematical models) are a measure of the *complexity* of the model. More complex models are usually closer to the training data, therefore maybe do not generalised well. Apart from the `GAIC` other goodness of fit measures, used in the literature for regression models are; the deviance; the $R^2$; the mean square errors, MSE, e.t.c. All of them are prone to overfitting if they are evaluated in the *in-bag* data set rather than in the *out-of-bag*. One could also argue that $R^2$ is not generalised well to non-normal errors and that MSE and its variations inappropriate for distributional regression models because their focus is in the location parameters of the response distribution ans not in other characteristics of the distribution of the response. Often other part of the distribution are of interest to the practioner. -->
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div id="fig-data_split" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-data_split-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<pre class="mermaid mermaid-js" data-label="fig-data_split">flowchart TB
  A[Data] --&gt; B{Multi-split} 
  A --&gt; C{Split once}
  C --&gt; D[Training]
  D --&gt; E[Validate]
  E --&gt; O[Test]
  B --&gt; F(Rearranged)
  B --&gt; G(Reweighed)
  G--&gt; H(Bayesian \n Bootstrap)
  G--&gt; J(Boosting)
  F --&gt; K(Non-param. \n Bootstrap)
  F --&gt; L(Cross \n Validation)
  L --&gt; M(k-Fold) 
  L --&gt; N(LOO) 
</pre>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-data_split-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 1: Different ways of splitting data to get in order to get more information”
</figcaption>
</figure>
</div>
</div>
</div>
<p>Partitioning the data into training, test, and validation sets should be done randomly. A potential risk when splitting the data only once arises when the investigation focuses on the tails of the response distribution. In such cases, the few extreme observations may end up in only one of the partitions, leading to potential issues when evaluating the model. Repeatedly reusing parts of the data, such as through bootstrapping or cross-validation, can help mitigate this risk. Multi-splitting the data (shown on the left side of Figure <a href="#fig-data_split" class="quarto-xref">Figure 1</a>) enables the evaluation of appropriate goodness-of-fit measures using out-of-bag data. There are two conceptual ways to multi-split a dataset: the first involves rearranging the data, and the second involves reweighting the observations. [As we will see later, the distinction between these two approaches is not always as clear-cut.] Rearranging the data is typically accomplished by creating appropriate indices that select different parts of the data. This leads to methods such as <strong>bootstrapping</strong> or <strong>cross-validation</strong>. On the other hand, reweighting the observations during the fitting process is a technique employed in the <strong>Bayesian Bootstrap</strong> and <strong>boosting</strong>.</p>
<!-- Partitioning the data into training, test and validation has to be done randomly. An inherent risk for splitting the data once comes when the interest of the investigation lies on the tail of the distribution of the response. In this, case the few extreme observations, could fall into only one of the partitioning sets creating problems when the model is evaluated. Repetitively reusing (parts) of the data, for example, bootstrapping or cross validation could avoid that. Multi-split of the data (left size of @fig-data_split) allow the evaluation of appropriate measures of goodness of fit in out of bag data. There are conceptuality two different ways of multi-split the data set; the first is by rearrange them and the second is by reweighed. \[We will see at a later stage that this difference is not so clear cut\]. Rearranging the data usually is done by creating appropriate indexes which pick different part of the data. This leads to **bootstrapping** or **cross validation**. Reweighed the observations, during the fit, is done in the **Bayesian Bootstrap** or in **boosting**. -->
<p>In classical bootstrapping, the data are re-sampled randomly with replacement <span class="math inline">\(B\)</span> times, and the model is refitted the same number of times. While computationally expensive, this process provides additional insights into the model, particularly regarding the variability of its parameters. For distributional regression models, both classical and Bayesian bootstrapping offer extra information about all the parameters in the model—namely, the distributional parameters, fitted coefficients, hyperparameters, and random effects. The Bayesian bootstrap re-weights the data as samples from a multinomial distribution and fits the re-weighted models <span class="math inline">\(B\)</span> times. Like the classical bootstrap, it provides valuable information about the variability of the model’s parameters. In boosting, each weak learner (i.e., each simple fitted model) is reweighted using the residuals from the previous fits. The results of all these learners are then aggregated into the final model. Boosting can be seen as a method of iteratively improving model accuracy by focusing on the previously mispredicted observations.</p>
<!-- In classical *bootstrapping* the data are re-sampled randomly with replacement $B$ times and the model is refitted similar times. The process, while computational expensive, could provides extra information about the model ans especially about the variability of its parameters. For distributional regression models, both *classical* and *Bayesian* bootstrap, provides extra information for all the parameters involved in the model, i.e. the distributional parameters, the fitted coefficients, the hyper parameters and als for the random effects. Bayesian bootstrap re-weights the data as samples from a a multinomial distribution and fits the re-weighted models $B$ times and provides the extra information about the variability of the parameters, the same way like the classical bootstrap does. In *boosting* each week learner, that is, each simple fitted model, is reweighed using as weights the residuals of the previous fits, then all learners are aggregated together for the final model. -->
<!-- Bootstrapping helps to evaluate how far the sample is from the population by giving an estimate of the variability between the different sub-samples. It also helps to calculate standard errors from a fitted model when there is no an easy way to do so with the conventional methods. It helps us to evaluate the variability of all of the parameters of a fitted GAMLSS by providing standard errors not only for the coefficient of the model but also for the random effects and hyper parameters, see @sec-ParametersforEstimation for the definition of different parameters.  -->
<p>In <span class="math inline">\(K\)</span>-fold cross-validation, the data are split into <span class="math inline">\(K\)</span> sub-samples. The model is then fitted <span class="math inline">\(k\)</span> times, each time using <span class="math inline">\(k-1\)</span> sub-samples for training and the remaining one sub-sample as the test set. By the end of the process, all <span class="math inline">\(n\)</span> observations will have been used as test data exactly once. The main advantage of <span class="math inline">\(K\)</span>-fold cross-validation is that it provides reliable test data for model evaluation with the additional cost of fitting <span class="math inline">\(K\)</span> models. Leave-One-Out Cross-Validation (LOO) is a special case of k-fold cross-validation, where the model is trained on <span class="math inline">\(n-1\)</span> observations and tested on the remaining single observation, iterating this process <span class="math inline">\(n\)</span> times. Consequently, <span class="math inline">\(n\)</span> different models are refitted. While computationally intensive, LOO ensures that each data point is used for testing, providing an unbiased evaluation of model performance. Both bootstrapping and <span class="math inline">\(K\)</span>-fold cross-validation, when appropriate performance metrics are used, can help in several ways: i) by facilitating model comparison on the test data, ii) by avoiding overfitting, and iii) by assisting in the selection of hyperparameters.</p>
<!-- A $k$-fold *cross validation* splits the data in $k$ sub-samples. The model is then fitted repeatedly $k$ times, each time the $k-1$-fold sets are used for training and the remaining one-fold as test data. By the time that all the $k$ models are fitted we would have $n$ observations fitted as test data fits. So the K-fold cross-validation allows us to get `test` data with the additinal cost of having to fit $K$ models. Leave one out, **LOO**, is an extreme version of the K-fold partition in which we pick $n-1$ observations for training and leave one out for test. In this case we have to refit $n$ different models. Both bootstrapping and $k$-fold cross validation when appropriate measures are used can help i) with model comparison (on test data) ii) by avoiding overfitting and iii) possible selecting the hyper parameters. -->
<p>Notice that in distributional regression models, there is no inherent need to physically partition the original data into subgroups when performing a single or multiple partitions. The same results can be achieved by indexing the original data.frame or by using prior weights during the model fitting process. For example, in <span class="math inline">\(K\)</span>-fold cross-validation, we need <span class="math inline">\(K\)</span> dummy vectors, <span class="math inline">\(i_k\)</span>, where $k = 1, , K. These dummy vectors take the value of 1 for the <span class="math inline">\(k\)</span>-th set of observations and <span class="math inline">\(0\)</span> for the rest. The dummy vectors <span class="math inline">\(i_k\)</span> can be used in two ways:</p>
<ol type="1">
<li><p>To select the observations from the <code>data.frame</code> for fitting.</p></li>
<li><p>As prior weights when fitting the model.</p></li>
</ol>
<p>Let <code>da</code> represent the <code>data.frame</code> used to fit the model, and <span class="math inline">\(i\)</span> the <span class="math inline">\(i_k\)</span> dummy vector. For each of the <span class="math inline">\(K\)</span> fits, the model fitting process would use the command <span class="math inline">\(data=da[,i]\)</span> to select the appropriate data, and <code>newdata=da[,i==0]</code> for evaluating the out-of-bag measure. Alternatively, one can use <code>weights=i</code> during the model fitting and <code>newdata=da[,i==0]</code> for evaluating any out-of-bag measures. Note that the appropriate measures for comparing models include predictive deviance (PD) and continuous rank probability scores (CRPS). The function data_Kfold() in the package generates the correct dummy vectors as a matrix of dimensions n B, which can be used for the cross-validation process.</p>
<!-- Notice that performing a single or multiple partitions in any distributional regression model there is no actually need to split the original data in subclass. The same results can be achieved either by indexing the original `data.frame` or by using prior weights to fit the different models. For example, in the $K$-th fold cross validation, we need $K$ dummy vectors, $i_k$, for $k=1,\ldots,K$, with value $1$ for the $k-1$ samples and $0$ for the rest. The dummy vectors $i_k$ can be used either to select observations from the `data.frame` or as prior weights in the fit. Let us denote `da` the `data.frame` used to fit the model and, `i`, the $i_k$ dummy vector. Then each of the $K$ fits it should have the options `data=da[,i]` when fitting the model and `newdata=da[,i==0]` for evaluation of of the out-of-bag measure. Equivalently, one could use `weights=i` for fitting using prior weights and `newdata=da[,i==0]` for any measure needed to be evaluated at the out-of-bag data. Note that possible measure to use for comparing models are the predictive deviance, **PD** and continuous rank probability scores, **CRPS**. The function in the package which can generate the right dummy vectors as a matrix of dimensions $n \times B$ is `data_Kfold()`, see -->
<p>For the classical bootstrap, we need <span class="math inline">\(B\)</span> vectors. Unlike cross-validation (CV), where the vectors for indexing and prior weights are identical, bootstrapping requires different vectors. The function <code>data_boot_index()</code> creates the appropriate vectors for indexing, while <code>data_boot_weights()</code> generates the vectors for prior weighting. These vectors should differ whether used as indices to select the relevant columns from the data matrix <code>da</code> or as prior weights, which indicate how many times each observation is selected. Typically, a vector like <span class="math inline">\((1, 0, 2, \ldots, 3, 2)\)</span> means that observation <span class="math inline">\(1\)</span> is picked once, observation <span class="math inline">\(2\)</span> is excluded from the fit, observation <span class="math inline">\(3\)</span> is selected twice, and so on. For Bayesian bootstrap, the <span class="math inline">\(B\)</span> vectors of length <span class="math inline">\(n\)</span> represent weights that sum to <span class="math inline">\(n\)</span>. An out-of-bag observation, in this case, is one with zero weight. This distinction makes the split between rearranged and reweighed in <a href="#fig-data_split" class="quarto-xref">Figure 1</a> somewhat artificial, as both methods can be interpreted as refitting approaches using prior weights.</p>
<!-- For the classical bootstrap, we also need $B$ vectors. Contrary to CV where the vectors for indexing and prior weights are identical, bootstrapping needs different vectors. The function `data_boot_index()` creates appropriate vectors for indexing while `data_boot_weihghts()` for prior weighing. they should be different whether we used them as indices to select the right columls form the data matrix `da` or as prior weights as either for of length $n$ indicating which observations to pick and how many times. Typically a vectors say $(1,0,2,\ldots,3, 2)$, indicates that observation $1$ is picked once, observation $2$ is excluded from the fit, observation $3$ is picked up 2 times e.t.c. For Bayesian bootstrap the $B$ vectors of length $N$ are weights summing up to $n$. A out-of-bag observation in this case can be defined as an observation with zero weights. This note alsmost make the split between **rearranged** and **reweighed** in @fig-data_split rather artificial since both can be thought as refitting methods using prior weights. -->
<!-- -partioning the data loke Cross Validation, **CV**,all need data partition and sould be el -->
<!-- For bootstrapping the prior weights will be $0$ for observations that were not selected. $1$ for observations that were selected once in the re-sampling, $2$ for observations selected twice, e.t.c. The vector of prior weights in bootstrapping should sum up to $n$, the number of observations.  In Bayesian bootstrapping, the weights, samples from a multinomial distribution, should be sum up to $n$. -->
<div id="tbl-partition" class="quarto-float quarto-figure quarto-figure-center" data-tbl-colwidths="[50,50]">
<figure class="quarto-float quarto-float-tbl">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-partition-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table 4: The data partition functions
</figcaption>
<div aria-describedby="tbl-partition-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Functions</th>
<th style="text-align: right;">Usage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-part"><code>data_part()</code></a></td>
<td style="text-align: right;">Creates a single or multiple (CV) partitions by introducing a factor with different levels</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data-part-list"><code>data_part_list()</code></a></td>
<td style="text-align: right;">Creates a single or multiple (CV) partitions with output a list of <code>data.frame</code>s</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data_boot-index"><code>data_boot_index()</code></a></td>
<td style="text-align: right;">Creates two lists. The in-bag,<code>IB</code>, indices for fitting and the out-of-bag, <code>OOB</code>, indices for prediction</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-data_boot-weights"><code>data_boot_weights()</code></a></td>
<td style="text-align: right;">Create a <span class="math inline">\(n \times B\)</span> matrix with columns weights for bootstrap fits</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-Kfold-index"><code>data_Kfold_index()</code></a></td>
<td style="text-align: right;">Creates a <span class="math inline">\(n \times K\)</span> matrix of variables to be used for cross validation data indexing</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="#sec-Kfold-weights"><code>data_Kfold_weights()</code></a></td>
<td style="text-align: right;">Creates a <span class="math inline">\(n \times K\)</span> matrix of dummy variables to be used for cross validation weighted fits</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="#sec-data-cut"><code>data_cut()</code></a></td>
<td style="text-align: right;">This is not a partition funtion but randomly select a specified porpotion of the data</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Here are the data partition functions.</p>
<section id="sec-data-part" class="level4">
<h4><code>data_part()</code></h4>
<p>The function <code>data_part()</code> it does not partitioning the data as such but adds a factor called <code>partition</code> to the data indicating the partition. By default the data are partitioned into two sets the training ,<code>train</code>, and the test data, <code>test</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb157"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>dap <span class="ot">&lt;-</span> gamlss.prepdata<span class="sc">:::</span><span class="fu">data_part</span>(da)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>data partition into two sets </code></pre>
</div>
<div class="sourceCode" id="cb159"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dap)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      rent area yearc location bath kitchen cheating partition
1 109.9487   26  1918        2    0       0        0     train
2 243.2820   28  1918        2    0       0        1      test
3 261.6410   30  1918        1    0       0        1     train
4 106.4103   30  1918        2    0       0        0      test
5 133.3846   30  1918        2    0       0        1      test
6 339.0256   30  1918        2    0       0        1     train</code></pre>
</div>
</div>
<p>If the user would like to split the data in two separate <code>data.frame</code>’s she/he can use;</p>
<div class="cell">
<div class="sourceCode" id="cb161"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>daTrain <span class="ot">&lt;-</span> <span class="fu">subset</span>(dap, partition<span class="sc">==</span><span class="st">&quot;train&quot;</span>)</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>daTest <span class="ot">&lt;-</span> <span class="fu">subset</span>(dap, partition<span class="sc">==</span><span class="st">&quot;test&quot;</span>)</span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(daTrain)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1846    8</code></pre>
</div>
<div class="sourceCode" id="cb163"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(daTest)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1236    8</code></pre>
</div>
</div>
<p>Note, that use of the option <code>partition</code> has the following behaviour;</p>
<ol type="i">
<li><p><code>partition=2L</code> (the default) the factor has two levels <code>train</code>, and <code>test</code>.</p></li>
<li><p><code>partition=3L</code> the factor has three levels <code>train</code>, <code>val</code> (for validation) and <code>test</code>.</p></li>
<li><p><code>partition &gt; 4L</code> say <code>K</code> then the levels are <code>1</code>, <code>2</code>…<code>K</code>. The factor then can be used to identify K-fold cross validation, see also the function <code>data_Kfols_CV()</code>.</p></li>
</ol>
<p><a href="#tbl-partition">back to table</a></p>
</section>
<section id="sec-data-part-list" class="level4">
<h4><code>data_part_list()</code></h4>
<p>The function <code>data_part_list()</code> creates a list of <code>dataframe</code>s which can be used either for single partition or for cross validation. The argument <code>partition</code> allows the splitting of the data to up to 20 subsets. The default is a list of 2 with elements <code>training</code> and <code>test</code> (single partition).</p>
<p>Here is a single partition in <code>train</code> and <code>test</code> data sets.</p>
<div class="cell">
<div class="sourceCode" id="cb165"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>allda <span class="ot">&lt;-</span>  <span class="fu">data_part_list</span>(rent) </span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(allda)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode" id="cb167"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(allda[[<span class="st">&quot;train&quot;</span>]]) <span class="co"># training data</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1200    9</code></pre>
</div>
<div class="sourceCode" id="cb169"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(allda[[<span class="st">&quot;test&quot;</span>]]) <span class="co"># test data</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 769   9</code></pre>
</div>
</div>
<p>Here is a multiple partition for cross validation.</p>
<div class="cell">
<div class="sourceCode" id="cb171"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>allda <span class="ot">&lt;-</span>  <span class="fu">data_part_list</span>(rent, <span class="at">partition=</span><span class="dv">10</span>) </span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>10-fold data partition </code></pre>
</div>
<div class="sourceCode" id="cb173"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(allda)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10</code></pre>
</div>
<div class="sourceCode" id="cb175"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(allda)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;4&quot;  &quot;5&quot;  &quot;6&quot;  &quot;7&quot;  &quot;8&quot;  &quot;9&quot;  &quot;10&quot;</code></pre>
</div>
</div>
<p><a href="#tbl-partition">back to table</a></p>
</section>
<section id="sec-data_boot-index" class="level4">
<h4><code>data_boot_index()</code></h4>
<p>The function <code>data_boot_index()</code> create two lists. The first called <code>IB</code> (for in-bag) and the second <code>OOB</code>, (out-of-bag). Each ellement of the list <code>IB</code> can be use to select a bootstrap sample from the original <code>data.frame</code> while each element of <code>OOB</code> can be use to select the out of sample data points. Note that each bootstap sample approximately contains 2/3 of the original data so we expact on avarage to 1/3 to be in <code>OOB</code> sample.</p>
<div class="cell">
<div class="sourceCode" id="cb177"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>DD <span class="ot">&lt;-</span> <span class="fu">data_boot_index</span>(rent, <span class="at">B=</span><span class="dv">10</span>)</span></code></pre></div>
</div>
<p>The class, length and names of the created lists;</p>
<div class="cell">
<div class="sourceCode" id="cb178"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(DD)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;list&quot;</code></pre>
</div>
<div class="sourceCode" id="cb180"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(DD)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode" id="cb182"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(DD)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;IB&quot;  &quot;OOB&quot;</code></pre>
</div>
</div>
<p>the first obsevations of the</p>
<div class="cell">
<div class="sourceCode" id="cb184"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(DD<span class="sc">$</span>IB[[<span class="dv">1</span>]]) <span class="co"># in bag</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 4 6 8 8</code></pre>
</div>
<div class="sourceCode" id="cb186"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(DD<span class="sc">$</span>OOB[[<span class="dv">1</span>]]) <span class="co"># out-of-bag</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3  5  7 15 21 22</code></pre>
</div>
</div>
<p><a href="#tbl-partition">back to table</a></p>
</section>
<section id="sec-data_boot-weights" class="level4">
<h4><code>data_boot_weights()</code></h4>
<p>The function <code>data_boot_weights()</code> create a <span class="math inline">\(n \times B\)</span>. matrix with columns possible weights for bootstap fits. Note that each bootstap sample approximately contains .666 of the original obsbation so we in general we expect 0.333 of the data to have zero weights.</p>
<div class="cell">
<div class="sourceCode" id="cb188"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>MM <span class="ot">&lt;-</span> <span class="fu">data_boot_weights</span>(rent, <span class="at">B=</span><span class="dv">10</span>)</span></code></pre></div>
</div>
<p>The <code>M</code> is a matrix which columns can be used as weights in bootstrap fits; Here is a plot of the first column</p>
<div class="cell">
<div class="sourceCode" id="cb189"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(MM[,<span class="dv">1</span>])</span></code></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img src="gamlss_prepdata_files/figure-html/unnamed-chunk-73-1.png" class="img-fluid" width="672" /></p>
</figure>
</div>
</div>
</div>
<p>and here is the first 6 rows os the matrix;</p>
<div class="cell">
<div class="sourceCode" id="cb190"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(MM)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
[1,]    1    2    2    1    0    1    3    1    3     1
[2,]    1    1    0    2    2    1    2    1    1     2
[3,]    0    0    2    1    2    1    2    1    1     0
[4,]    1    0    1    0    3    0    1    1    0     2
[5,]    0    2    3    1    1    1    2    1    2     1
[6,]    1    0    0    1    0    1    4    0    1     0</code></pre>
</div>
</div>
<p><a href="#tbl-partition">back to table</a></p>
</section>
<section id="sec-Kfold-index" class="level4">
<h4><code>data_Kfold_index()</code></h4>
<p>The function <code>data_Kfold()</code> creates a matrix which columns can be use for cross validation either as indices to select data for fitting or as prior weights.</p>
<div class="cell">
<div class="sourceCode" id="cb192"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>PP <span class="ot">&lt;-</span> <span class="fu">data_Kfold_index</span>(rent, <span class="at">K=</span><span class="dv">10</span>)</span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(PP)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
[1,]    1    1    1    1    0    1    1    1    1     1
[2,]    2    2    0    2    2    2    2    2    2     2
[3,]    3    3    3    3    3    3    3    3    0     3
[4,]    4    4    4    4    4    0    4    4    4     4
[5,]    5    5    5    5    0    5    5    5    5     5
[6,]    6    6    6    6    6    6    6    0    6     6</code></pre>
</div>
</div>
<p><a href="#tbl-partition">back to table</a></p>
</section>
<section id="sec-Kfold-weights" class="level4">
<h4><code>data_Kfold_weights()</code></h4>
<p>The function <code>data_Kfold()</code> creates a matrix which columns can be use for cross validation either as indices to select data for fitting or as prior weights.</p>
<div class="cell">
<div class="sourceCode" id="cb194"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>PP <span class="ot">&lt;-</span> <span class="fu">data_Kfold_weights</span>(rent, <span class="at">K=</span><span class="dv">10</span>)</span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(PP)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
[1,]    1    1    1    1    0    1    1    1    1     1
[2,]    1    1    0    1    1    1    1    1    1     1
[3,]    1    1    1    1    1    1    1    1    0     1
[4,]    1    1    1    1    1    0    1    1    1     1
[5,]    1    1    1    1    0    1    1    1    1     1
[6,]    1    1    1    1    1    1    1    0    1     1</code></pre>
</div>
</div>
<p><a href="#tbl-partition">back to table</a></p>
</section>
<section id="sec-data-cut" class="level4">
<h4><code>data_cut()</code></h4>
<p>The function <code>data_cut()</code> is not included in the partition Section for its data partitioning properties. It is designed to select a random subset of the data specifically for plotting purposes. This is especially useful when working with large datasets, where plotting routines—such as those from the <code>ggplot2</code> package—can become very slow.</p>
<p>The <code>data_cut()</code> function can either: • Automatically reduce the data size based on the total number of observations, or • Subset the data according to a user-specified percentage.</p>
<p>Here is an example of the function assuming that that the user requires <span class="math inline">\(50%\)</span> of the data;</p>
<div class="cell">
<div class="sourceCode" id="cb196"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>da1 <span class="ot">&lt;-</span> <span class="fu">data_cut</span>(rent99, <span class="at">percentage=</span>.<span class="dv">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 50 % of data are saved, 
that is, 1541 observations. </code></pre>
</div>
<div class="sourceCode" id="cb198"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(rent99)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3082    9</code></pre>
</div>
<div class="sourceCode" id="cb200"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(da1)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1541    9</code></pre>
</div>
</div>
<p>The function <code>data_cut()</code> is used extensively in many plotting routines within the <code>gamlss.ggplots</code> package. When the percentage option is not specified, a default rule is applied to determine the proportion of the data used for plotting. This approach balances performance and visualization quality when working with large datasets.</p>
<p>Let <span class="math inline">\(n\)</span> denote the total number of observations. Then:</p>
<ul>
<li>if <span class="math inline">\(n \le 50,000\)</span>: All data are used for plotting.</li>
<li>if <span class="math inline">\(50,000 &lt; n \le 100,000\)</span>: 50% of the data are used.</li>
<li>If <span class="math inline">\(100,000 &lt; n \le 1,000,000\)</span>: 20% of the data are used.</li>
<li>If <span class="math inline">\(n&gt;1,000,000\)</span> : 10% of the data are used.</li>
</ul>
<p>This default behaviour ensures that plotting remains efficient even with very large datasets.</p>
<p><a href="#tbl-partition">back to table</a></p>
</section>
</section>
</section>
<section id="sec-Family" class="level2">
<h2>Plotting Distribution Families</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>All functions listed below belong to the <code>gamlss.ggplots</code> package, not the <code>gamlss.prepdata</code> package. However, since they can be useful during the pre-modeling stage, they are presented here. The later version of the <code>gamlss.ggplots</code> can be found in <a href="https://github.com/gamlss-dev/gamlss.ggplots" class="uri">https://github.com/gamlss-dev/gamlss.ggplots</a></p>
</div>
</div>
<p>In the following function, no fitted model is required—only values for the parameters need to be specified.</p>
<section id="family_pdf" class="level4">
<h4><code>family_pdf()</code></h4>
<p>The function <code>family_pdf()</code> plots individual probability density functions (PDFs) from distributions in the <code>gamlss.family</code> package. Although it typically requires the family argument, it defaults to the Normal distribution (NO) if none is provided.</p>
<div class="cell">
<div class="sourceCode" id="cb202"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">family_pdf</span>(<span class="at">from=</span><span class="sc">-</span><span class="dv">5</span>,<span class="at">to=</span><span class="dv">5</span>, <span class="at">mu=</span><span class="dv">0</span>, <span class="at">sigma=</span><span class="fu">c</span>(.<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">2</span>))</span></code></pre></div>
<div class="cell-output-display">
<div id="fig-fam_pdf_continuous" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-fam_pdf_continuous-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="gamlss_prepdata_files/figure-html/fig-fam_pdf_continuous-1.png" class="img-fluid" width="672" />
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-fam_pdf_continuous-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 2: Continuous response example: plotting the pdf of a normal random variable.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The following demonstrates how discrete distributions are displayed. We begin with a distribution that can take infinitely many count values—the Negative Binomial distribution;</p>
<div class="cell">
<div class="sourceCode" id="cb203"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">family_pdf</span>(NBI, <span class="at">to=</span><span class="dv">15</span>, <span class="at">mu=</span><span class="dv">1</span>, <span class="at">sigma=</span><span class="fu">c</span>(.<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">alpha=</span>.<span class="dv">9</span>, <span class="at">size.seqment =</span> <span class="dv">3</span>)</span></code></pre></div>
<div class="cell-output-display">
<div id="fig-fam_pdf_discrete" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-fam_pdf_discrete-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="gamlss_prepdata_files/figure-html/fig-fam_pdf_discrete-1.png" class="img-fluid" width="672" />
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-fam_pdf_discrete-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 3: Count response example: plotting the pdf of a beta binomial.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Here we use a discrete distribution with a finite range of possible values: the Beta-Binomial distribution.</p>
<div class="cell">
<div class="sourceCode" id="cb204"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="fu">family_pdf</span>(BB, <span class="at">to=</span><span class="dv">15</span>, <span class="at">mu=</span>.<span class="dv">5</span>, <span class="at">sigma=</span><span class="fu">c</span>(.<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">2</span>),  <span class="at">alpha=</span>.<span class="dv">9</span>, , <span class="at">size.seqment =</span> <span class="dv">3</span>)</span></code></pre></div>
<div class="cell-output-display">
<div id="fig-fam_pdf_binomial" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-fam_pdf_binomial-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="gamlss_prepdata_files/figure-html/fig-fam_pdf_binomial-1.png" class="img-fluid" width="672" />
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-fam_pdf_binomial-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 4: Beta binomial response example: plotting the pdf of a beta binomial.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="family_cdf" class="level4">
<h4><code>family_cdf</code></h4>
<p>The function <code>family_cdf()</code> plots cumulative distribution functions (CDFs) from the <strong>gamlss.family</strong> distributions. The primary argument required is the family specifying the distribution to be used.</p>
<div class="cell">
<div class="sourceCode" id="cb205"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="fu">family_cdf</span>(NBI, <span class="at">to=</span><span class="dv">15</span>, <span class="at">mu=</span><span class="dv">1</span>, <span class="at">sigma=</span><span class="fu">c</span>(.<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">alpha=</span>.<span class="dv">9</span>, <span class="at">size.seqment =</span> <span class="dv">3</span>)</span></code></pre></div>
<div class="cell-output-display">
<div id="fig-fam_cdf_discrete" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-fam_cdf_discrete-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="gamlss_prepdata_files/figure-html/fig-fam_cdf_discrete-1.png" class="img-fluid" width="672" />
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-fam_cdf_discrete-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 5: Count response example: plotting the cdf of a negative binomial.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The CDf of the negative binomial;</p>
<div class="cell">
<div class="sourceCode" id="cb206"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">family_cdf</span>(BB, <span class="at">to=</span><span class="dv">15</span>, <span class="at">mu=</span>.<span class="dv">5</span>, <span class="at">sigma=</span><span class="fu">c</span>(.<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">2</span>),  <span class="at">alpha=</span>.<span class="dv">9</span>, , <span class="at">size.seqment =</span> <span class="dv">3</span>)</span></code></pre></div>
<div class="cell-output-display">
<div id="fig-fam_cdf_binomial" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-fam_cdf_binomial-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="gamlss_prepdata_files/figure-html/fig-fam_cdf_binomial-1.png" class="img-fluid" width="672" />
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-fam_cdf_binomial-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 6: Count response example: plotting the cdf of a beta binomial.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="family_cor" class="level4">
<h4><code>family_cor()</code></h4>
<p>The function <code>family_cor()</code> offers a basic method for examining the inter-correlation among the parameters of any distribution from the <strong>gamlss.family</strong>. It performs the following steps:</p>
<ul>
<li>Generates 10,000 random values from the specified distribution.</li>
<li>Fits the same distribution to the generated data.</li>
<li>Extracts and plots the correlation coefficients of the distributional parameters.</li>
</ul>
<p>These correlation coefficients are derived from the variance-covariance matrix of the fitted model.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>This method provides only a rough indication of how the parameters are correlated at specific values of the distribution’s parameters. The correlation structure may vary significantly at different points in the parameter space, as the distribution can behave quite differently depending on those values.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb207"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="co">#source(&quot;~/Dropbox/github/gamlss-ggplots/R/family_cor.R&quot;)</span></span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a>gamlss.ggplots<span class="sc">:::</span><span class="fu">family_cor</span>(<span class="st">&quot;BCTo&quot;</span>, <span class="at">mu=</span><span class="dv">1</span>, <span class="at">sigma=</span><span class="fl">0.11</span>, <span class="at">nu=</span><span class="dv">1</span>, <span class="at">tau=</span><span class="dv">5</span>, <span class="at">no.sim=</span><span class="dv">10000</span>)</span></code></pre></div>
<div class="cell-output-display">
<div id="fig-fam_correlation" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-fam_correlation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="gamlss_prepdata_files/figure-html/fig-fam_correlation-1.png" class="img-fluid" width="672" />
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-fam_correlation-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure 7: Family correlation of a BCTo distribution at specified values of the parameters.
</figcaption>
</figure>
</div>
</div>
</div>
<!-- \subsection{Time Series and spatial feature} -->
<!-- \label{Time Series and spatial feature} -->
<!-- ``` -->
<div id="quarto-navigation-envelope" class="hidden">
<p><span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-sidebar-title">Extra material for GAMLSS packages</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar-title">Extra material for GAMLSS packages</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar:Home">Home</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar:/index.html">/index.html</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar:About extra materrial for GAMLSS packages">About extra materrial for GAMLSS packages</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar:/about.html">/about.html</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar:The Functions in the package `gamlss.prepdata`">The Functions in the package <code>gamlss.prepdata</code></span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-int-navbar:/gamlss_prepdata.html">/gamlss_prepdata.html</span></p>
</div>
<div id="quarto-meta-markdown" class="hidden">
<p><span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-metatitle">The Functions in the package <code>gamlss.prepdata</code> – Extra material for GAMLSS packages</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-twittercardtitle">The Functions in the package <code>gamlss.prepdata</code> – Extra material for GAMLSS packages</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-ogcardtitle">The Functions in the package <code>gamlss.prepdata</code> – Extra material for GAMLSS packages</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-metasitename">Extra material for GAMLSS packages</span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-twittercarddesc"></span> <span class="hidden quarto-markdown-envelope-contents" data-render-id="quarto-ogcardddesc"></span></p>
</div>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-RigbyStasinopoulos05" class="csl-entry" role="listitem">
Rigby, R. A., and D. M. Stasinopoulos. 2005. <span>“Generalized Additive Models for Location, Scale and Shape (with Discussion).”</span> <em>Applied Statistics</em> 54: 507–54.
</div>
<div id="ref-Rigbyetal2019" class="csl-entry" role="listitem">
Rigby, R. A., D. M. Stasinopoulos, G. Z. Heller, and F. De Bastiani. 2019. <em>Distributions for Modeling Location, Scale, and Shape: Using GAMLSS in r</em>. Boca Raton: Chapman &amp; Hall/CRC.
</div>
<div id="ref-Stasinopoulosetal2017" class="csl-entry" role="listitem">
Stasinopoulos, D. M., R. A. Rigby, G. Z. Heller, V. Voudouris, and F. De Bastiani. 2017. <em>Flexible Regression and Smoothing: Using GAMLSS in r</em>. Boca Raton: Chapman &amp; Hall/CRC.
</div>
<div id="ref-stasinopoulos2024generalized" class="csl-entry" role="listitem">
Stasinopoulos, M. D., T. Kneib, N. Klein, A. Mayr, and G. Z Heller. 2024. <em>Generalized Additive Models for Location, Scale and Shape: A Distributional Regression Approach, with Applications</em>. Vol. 56. Cambridge University Press.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id = "quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->

</body>

</html>
